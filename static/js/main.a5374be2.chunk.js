(this.webpackJsonpcovid19=this.webpackJsonpcovid19||[]).push([[0],{114:function(e,t,a){e.exports=a.p+"static/media/maps.99715425.yml"},128:function(e,t,a){e.exports=a.p+"static/media/transmissions.8de85df3.yml"},215:function(e,t,a){e.exports=a.p+"static/media/transmissions_coord.d68bd57b.yml"},3:function(e,t,a){e.exports=a.p+"static/media/i18n.2dc5d962.yml"},373:function(e,t,a){e.exports=a(555)},378:function(e,t,a){},386:function(e,t,a){},44:function(e,t,a){e.exports=a.p+"static/media/other_diseases_stats.e9a44273.yml"},555:function(e,t,a){"use strict";a.r(t);var n=a(2),o=a.n(n),r=a(59),i=a.n(r),l=(a(378),a(379),a(22)),c=a(9),s=a(10),u=a(15),d=a(16),p=a(17),m=a(585),g=a(586),f=a(587),h=a(133),y=a(47),b=a(311),E=a.n(b),v=a(98),O=(a(386),a(14)),C=a(71),A=a(70),_=a(316),T=a(591),S=a(172),N=a(592),k=a(29),M=a(588),x=a(129),R=a(313),j=a.n(R),w=(a(391),a(114)),I=a.n(w),D=a(91),L=a.n(D),F=a(128),P=a.n(F),H=a(215),U=a.n(H),z=a(39),G=a(163),W=a(314),B=a(92),Y=a(3),V=a.n(Y),K="WORLD",Z="CHN1",X="CHN2",J="US",q="\u5168\u7403",$="\u4e2d\u56fd\u5927\u9646",Q="\u9999\u6e2f",ee="\u6fb3\u95e8",te="\u53f0\u6e7e",ae="\u610f\u5927\u5229",ne="\u7f8e\u56fd",oe="United States of America",re="United Kingdom",ie="\u83f2\u5f8b\u5bbe",le="International Conveyance",ce=function(e){var t=e.substr(0,10).split("-"),a=Object(z.a)(t,3),n=a[0],o=a[1],r=a[2];return new Date(n,o-1,r)},se=function(e,t,a){var n=Object(G.a)(ce(e),1);return n<=ce(a)?Object(B.a)(n,"yyyy-MM-dd"):t},ue=function(e,t,a){var n=Object(W.a)(ce(e),1);return n>=ce(t)?Object(B.a)(n,"yyyy-MM-dd"):a},de=function(e,t){return Object(B.a)(ce(e),V.a.DATE_FORMAT_2[t])},pe=function(e,t){var a=new Date(e);return new Date(a.getTime()-6e4*ce(t).getTimezoneOffset()).toISOString()},me={confirmedCount:V.a.CONFIRMED,deadCount:V.a.DEATHS,curedCount:V.a.RECOVERED,fatalityRate:V.a.FATALITY_RATE,recoveryRate:V.a.RECOVERY_RATE},ge=function(e,t){return[e].concat(Object(O.a)(t)).reduce((function(e,t){return e[t]}))},fe=function(e,t){var a=e;return"en"===t&&(a=e.split("(")[0].trim()),"en"===t&&(a=a.replace("United States of America","USA")),"en"===t&&(a=a.replace("United Kingdom","UK")),"en"===t&&(a=a.replace("International Conveyance","Int'l Conveyance")),"en"===t&&(a=a.replace(" District","")),"en"===t&&(a=a.replace(" County","")),"zh"===t&&(a=a.replace("\uff08\u6765\u81ea\u94bb\u77f3\u516c\u4e3b\u53f7\uff09","").trim()),a},he=function(e){document.body.style.background=e?"var(--darker-grey)":"#fff",e?document.body.classList.add("dark"):document.body.classList.remove("dark")},ye=function e(t,a,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"children",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:q,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=ue(a,"2019-09-01","2050-01-01"),d=Object.entries(t).filter((function(e){var t=Object(z.a)(e,2),a=t[0];t[1];return!["confirmedCount","deadCount","curedCount","ENGLISH",q].includes(a)})).map((function(d){var p=Object(z.a)(d,2),m=p[0],g=p[1],f=c===q?m:"".concat(c,".").concat(m),h={name:m,displayName:"zh"===n?m:g.ENGLISH,region:f,confirmedCount:0===Object.keys(g.confirmedCount).length?NaN:g.confirmedCount[a]?g.confirmedCount[a]:0,deadCount:0===Object.keys(g.deadCount).length?NaN:g.deadCount[a]?g.deadCount[a]:0,curedCount:0===Object.keys(g.curedCount).length?NaN:g.curedCount[a]?g.curedCount[a]:0};if(s){var y=u in g.confirmedCount?g.confirmedCount[u]:h.confirmedCount,b=u in g.deadCount?g.deadCount[u]:h.deadCount;h=Object(l.a)({},h,{active:h.confirmedCount-h.deadCount-h.curedCount,newConfirmed:h.confirmedCount-y,newDead:h.deadCount-b,fatalityRate:h.deadCount/h.confirmedCount,recoveryRate:h.curedCount/h.confirmedCount})}return o&&("Greater London"===m||"Netherlands"===t.ENGLISH&&"\u8377\u5170"===m||"Mainland China"===t.ENGLISH||"Italy"===t.ENGLISH||"Philippines"===t.ENGLISH||t.ENGLISH===oe)?h:(Object.keys(g).length>4&&(h[r]=e(g,a,n,o,r,i,f,s)),h)}));return i?d.sort((function(e,t){return e[i]>t[i]||isNaN(t[i])?-1:1})):d},be=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={loaded:!1,cursor:[0,0],clicked:!1,showTransmissions:!1,usState:null},a.handleGeographyClick=function(e){return function(){a.state.clicked&&null!=e&&a.props.regionToggle(e.split("."))}},a.onZoomEnd=function(e,t){a.props.handleMapZoomChange(t.zoom)},a.getConfig=function(e,t){return null!=e?e.split(",").map((function(e){return parseInt(e,10)})):t},a.getColorScale=function(e){var t=a.props,n=t.data,o=t.currentRegion,r=t.scale,i=t.metric,l=t.darkMode,c=I.a[a.props.currentMap],s="linear"===r?A.a:_.a,u=c["maxScale_".concat(i)];if(e&&"confirmedCount"===i){var d=ge(n,o.slice(0,2));u=Math.max.apply(Math,Object(O.a)(Object.keys(d).filter((function(e){return!["confirmedCount","curedCount","deadCount","ENGLISH"].includes(e)})).map((function(e){return Math.max.apply(Math,Object(O.a)(Object.values(d[e][i])))}))))}var p=s().domain([1,u]).clamp(!0),m=function(e){return l?.95*e+.05:.95-.95*e};return{colorScale:Object(T.a)((function(e){if(a.state.showTransmissions&&a.props.currentMap===K){var t=new M.a(Object(S.c)(m(p(e)))).desaturate(100);return l?t.getLuminance()<.09?t.darken(5).setAlpha(.9).toRgbString():t.lighten(5).setAlpha(.9).toRgbString():t.setAlpha(.6).toRgbString()}var n=new M.a(Object(S.c)(m(p(e))));return l?n.desaturate(10).toRgbString():n.toRgbString()})),mapScale:p}},a.getStrokeColor=function(e,t){var n=a.getColorScale(t),o=n.colorScale,r=n.mapScale,i=a.props.darkMode,l=new M.a(o(e));return i?l.isDark()?o(r.invert(r(e)+.5)):o(r.invert(r(e)-.5)):l.isDark()?o(r.invert(r(e)-.6)):o(r.invert(r(e)+.3))},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this;if(this.props.currentMap===e.currentMap&&this.state.usState===t.usState||(this.setState({loaded:!1}),setTimeout((function(){a.props.tooltipRebuild()}),100)),"US2"===this.props.currentMap){var n=this.props.currentRegion[1];n!==this.state.usState&&this.setState({usState:n})}}},{key:"render",value:function(){var e=this;if("TRANSMISSION"===this.props.currentMap)return o.a.createElement("div",null);var t=I.a[this.props.currentMap],a=this.props,r=a.data,i=a.metric,l=a.date,c=a.lang,s=a.currentRegion,u=a.mapZoom,d=a.darkMode,p="zh"!==c?"en":"zh",m="US2"===this.props.currentMap&&null!=this.state.usState&&this.state.usState in L.a,g=m?L.a[this.state.usState].center.split(",").map((function(e){return parseFloat(e)})):t.center.split(",").map((function(e){return parseFloat(e)})),f=m?L.a[this.state.usState].scale:t.scale,h=m?"geoMercator":t.projection,y=this.getColorScale(m).colorScale,b=ge(r,["\u56fd\u9645\u8fd0\u8f93","\u94bb\u77f3\u516c\u4e3b\u53f7"]),E=b[i][l]?b[i][l]:0,v=this.getStrokeColor(E,m),O=d?"var(--primary-color-10)":"var(--grey)";return o.a.createElement(n.Fragment,null,this.props.currentMap===K&&o.a.createElement("div",{className:"map-transmission-toggle-wrap"},o.a.createElement(j.a,{className:"map-transmission-toggle",defaultChecked:this.state.showTransmissions,onChange:function(){return e.setState({showTransmissions:!e.state.showTransmissions})},icons:!1}),o.a.createElement("span",null,V.a.TRANSMISSIONS[this.props.lang])),o.a.createElement(C.ComposableMap,{projection:h,projectionConfig:{scale:f,rotate:t.rotate?t.rotate.split(",").map((function(e){return parseInt(e,10)})):[0,0,0],parallels:t.parallels?t.parallels.split(",").map((function(e){return parseInt(e,10)})):[0,0]}},o.a.createElement(N.a,{id:"lines",height:6,width:6,stroke:O,strokeWidth:1,background:d?"var(--darker-grey)":"#fff",orientation:["diagonal"]}),o.a.createElement(N.a,{id:"background-lines",height:6,width:6,stroke:d?"#333":"#ddd",strokeWidth:1,background:d?"var(--darker-grey)":"#fff",orientation:["diagonal"]}),o.a.createElement(C.ZoomableGroup,{zoom:u,onZoomEnd:this.onZoomEnd,onMoveStart:function(t,a){return e.setState({cursor:[a.x,a.y],clicked:!1})},onMoveEnd:function(t,a){Math.abs(a.x-e.state.cursor[0])<1&&Math.abs(a.y-e.state.cursor[1])<1&&e.setState({clicked:!0})},onTouchStart:k.isMobile||k.isIPad13?function(){return e.setState({clicked:!0})}:null,center:g,minZoom:.2,maxZoom:5,disableZooming:k.isMobile||k.isIPad13,disablePanning:k.isMobile||k.isIPad13},![K,J].includes(this.props.currentMap)&&o.a.createElement(C.Geographies,{geography:"maps/".concat("US2"===this.props.currentMap?"USA":"HKG"===this.props.currentMap?"CHN_1":"WORLD",".json"),onMouseEnter:function(){e.state.loaded||(e.setState({loaded:!0}),e.props.tooltipRebuild())}},(function(t){return t.geographies.map((function(t){var a=0;if(null!=t.properties.REGION){var n=ge(r,t.properties.REGION.split("."));n&&n[i]&&n[i][l]&&(a=n[i][l])}var c="US2"===e.props.currentMap?J:"HKG"===e.props.currentMap?Z:K,u=t.properties[I.a[c].name_key[p]];return(c===K?t.properties.CHINESE_NAME===s[0]:t.properties.CHINESE_NAME===s[1])?o.a.createElement("div",null):c===J&&1===s.length?o.a.createElement("div",null):o.a.createElement(C.Geography,{className:"map-geography",key:t.rsmKey,geography:t,"data-tip":"".concat(u,' <span class="plot-tooltip-bold">').concat(a,"</span>"),style:{default:{fill:d?"var(--darker-grey)":"#fff",stroke:d?"#333":"#ddd",strokeWidth:2},hover:{fill:'url("#background-lines") '.concat(d?"#333":"#ddd"),stroke:d?"#333":"#ddd",strokeWidth:2,cursor:a>0?"pointer":"default"},pressed:{fill:'url("#background-lines") '.concat(d?"#333":"#ddd"),stroke:d?"#333":"#ddd",strokeWidth:2,cursor:a>0?"pointer":"default"}},onClick:e.handleGeographyClick(t.properties.REGION)})}))})),o.a.createElement(C.Geographies,{geography:"maps/".concat(t.filename),onMouseEnter:function(){e.state.loaded||(e.setState({loaded:!0}),e.props.tooltipRebuild())}},(function(a){return a.geographies.map((function(a,c){var u=0;if(null!=a.properties.REGION){var g=ge(r,a.properties.REGION.split("."));g&&g[i]&&g[i][l]&&(u=g[i][l])}var f=a.properties[t.name_key[p]],h=a.properties[t.name_key.zh]===s[s.length-1];t.parent_key&&(h=h&&a.properties[t.parent_key]===s[s.length-2]);var b=!1;t.parent_key?(b=a.properties[t.parent_key]===s[s.length-1],s.length>=3&&(b=b||a.properties[t.parent_key]===s[s.length-2]),1!==s.length&&s[s.length-1]!==$||(b=!0),b=b||h):b=!0;var E=0===u?O:e.getStrokeColor(u,m);return"US2"!==e.props.currentMap||b?o.a.createElement(n.Fragment,{key:"fragment-".concat(a.rsmKey)},o.a.createElement(C.Geography,{key:a.rsmKey,className:"map-geography",geography:a,"data-tip":"".concat(f,' <span class="plot-tooltip-bold">').concat(u,"</span>"),style:{default:{fill:h?'url("#highlightLines-'.concat(c,'") ').concat(O):u>0?y(u):'url("#lines")',stroke:E,strokeWidth:h?1:0,opacity:b?1:.2},hover:{fill:'url("#highlightLines-'.concat(c,'") ').concat(O),strokeWidth:1,stroke:E,cursor:u>0?"pointer":"default"},pressed:{fill:'url("#highlightLines-'.concat(c,'") ').concat(O),strokeWidth:1,stroke:E,cursor:u>0?"pointer":"default"}},onClick:e.handleGeographyClick(a.properties.REGION)}),o.a.createElement(N.a,{id:"highlightLines-".concat(c),height:6,width:6,stroke:E,strokeWidth:1,background:0!==u?y(u):d?"var(--darker-grey)":"#fff",orientation:["diagonal"]})):o.a.createElement("div",null)}))})),this.props.currentMap===K&&this.state.showTransmissions&&P.a.filter((function(e){return ce(e.date)<=ce(l)})).map((function(e,t){return o.a.createElement(C.Line,{keys:"transmission-".concat(t),from:U.a[e.from].split(",").map((function(e){return parseFloat(e)})),to:U.a[e.to].split(",").map((function(e){return parseFloat(e)})),stroke:d?"rgba(222,73,104,0.9)":"rgba(222, 73, 104, 0.5)",strokeWidth:1,strokeLinecap:"round",style:{pointerEvents:"none"}})})),[K,Z,X].includes(this.props.currentMap)&&o.a.createElement(C.Marker,{key:"wuhan",coordinates:[114.2,30.3]},o.a.createElement("g",{fill:"none",stroke:"var(--primary-color-4)",strokeWidth:"2",pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round",transform:"translate(-12, -24)"},o.a.createElement("circle",{cx:"12",cy:"10",r:"3"}),o.a.createElement("path",{d:"M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 6.9 8 11.7z"}))),(this.props.currentMap===K||"JPN"===this.props.currentMap)&&o.a.createElement(C.Marker,{key:"diamond-princess",coordinates:[139.6,35.4]},o.a.createElement(x.c,{size:this.props.currentMap===K?18:36,color:y(E),className:"map-ship","data-tip":"".concat("zh"===c?"\u94bb\u77f3\u516c\u4e3b\u53f7":b.ENGLISH,' <span class="plot-tooltip-bold">').concat(E,"</span>"),style:{stroke:v,visibility:E>0?"visible":"hidden",strokeWidth:"\u94bb\u77f3\u516c\u4e3b\u53f7"===s[s.length-1]?30:0},onClick:function(){return e.props.regionToggle(["\u56fd\u9645\u8fd0\u8f93","\u94bb\u77f3\u516c\u4e3b\u53f7"])}})))))}}]),t}(n.Component),Ee=a(593),ve=a(594),Oe=a(595),Ce=a(580),Ae=a(318),_e=(a(392),{WORLD:{title:V.a.WORLD_MAP,regionName:q,flagCode:"un",continent:V.a.WORLD_MAP},CHN1:{title:V.a.CHINA_MAP1,regionName:"\u4e2d\u56fd",flagCode:"cn",continent:V.a.ASIA},CHN2:{title:V.a.CHINA_MAP2,regionName:"\u4e2d\u56fd",flagCode:"cn",continent:V.a.ASIA},IRN:{title:V.a.IRAN_MAP,regionName:"\u4f0a\u6717",flagCode:"ir",continent:V.a.ASIA},EUROPE:{title:V.a.EUROPE,regionName:q,flagCode:"eu",continent:V.a.EUROPE},ITA:{title:V.a.ITALY_MAP,regionName:ae,flagCode:"it",continent:V.a.EUROPE},ITA2:{title:V.a.ITALY_MAP2,regionName:ae,flagCode:"it",continent:V.a.EUROPE},ESP:{title:V.a.SPAIN_MAP,regionName:"\u897f\u73ed\u7259",flagCode:"es",continent:V.a.EUROPE},DEU:{title:V.a.GERMANY_MAP,regionName:"\u5fb7\u56fd",flagCode:"de",continent:V.a.EUROPE},FRA:{title:V.a.FRANCE_MAP,regionName:"\u6cd5\u56fd",flagCode:"fr",continent:V.a.EUROPE},US:{title:V.a.US_MAP,regionName:ne,flagCode:"us",continent:V.a.NORTH_AMERICA},US2:{title:V.a.US_MAP2,regionName:ne,flagCode:"us",continent:V.a.NORTH_AMERICA},KOR:{title:V.a.KOREA_MAP,regionName:"\u97e9\u56fd",flagCode:"kr",continent:V.a.ASIA},CHE:{title:V.a.SWITZERLAND_MAP,regionName:"\u745e\u58eb",flagCode:"ch",continent:V.a.EUROPE},GBR:{title:V.a.UK_MAP,regionName:"\u82f1\u56fd",flagCode:"gb",continent:V.a.EUROPE},NLD:{title:V.a.NETHERLANDS_MAP,regionName:"\u8377\u5170",flagCode:"nl",continent:V.a.EUROPE},BEL:{title:V.a.BELGIUM_MAP,regionName:"\u6bd4\u5229\u65f6",flagCode:"be",continent:V.a.EUROPE},IND:{title:V.a.INDIA_MAP,regionName:"\u5370\u5ea6",flagCode:"in",continent:V.a.ASIA},JPN:{title:V.a.JAPAN_MAP,regionName:"\u65e5\u672c",flagCode:"jp",continent:V.a.ASIA},PAK:{title:V.a.PAKISTAN_MAP,regionName:"\u5df4\u57fa\u65af\u5766",flagCode:"pk",continent:V.a.ASIA},MYS:{title:V.a.MALAYSIA_MAP,regionName:"\u9a6c\u6765\u897f\u4e9a",flagCode:"my",continent:V.a.ASIA},PHL:{title:V.a.PHILIPPINES_MAP,regionName:ie,flagCode:"ph",continent:V.a.ASIA},SAU:{title:V.a.SAUDI_ARABIA_MAP,regionName:"\u6c99\u7279\u963f\u62c9\u4f2f",flagCode:"sa",continent:V.a.ASIA},IDN:{title:V.a.INDONESIA_MAP,regionName:"\u5370\u5ea6\u5c3c\u897f\u4e9a",flagCode:"id",continent:V.a.ASIA},THA:{title:V.a.THAILAND_MAP,regionName:"\u6cf0\u56fd",flagCode:"th",continent:V.a.ASIA},AUT:{title:V.a.AUSTRIA_MAP,regionName:"\u5965\u5730\u5229",flagCode:"at",continent:V.a.EUROPE},PRT:{title:V.a.PORTUGAL_MAP,regionName:"\u8461\u8404\u7259",flagCode:"pt",continent:V.a.EUROPE},NOR:{title:V.a.NORWAY_MAP,regionName:"\u632a\u5a01",flagCode:"no",continent:V.a.EUROPE},AUS:{title:V.a.AUSTRALIA_MAP,regionName:"\u6fb3\u5927\u5229\u4e9a",flagCode:"au",continent:V.a.OCEANIA},CAN:{title:V.a.CANADA_MAP,regionName:"\u52a0\u62ff\u5927",flagCode:"ca",continent:V.a.NORTH_AMERICA},SWE:{title:V.a.SWEDEN_MAP,regionName:"\u745e\u5178",flagCode:"se",continent:V.a.EUROPE},RUS:{title:V.a.RUSSIA_MAP,regionName:"\u4fc4\u7f57\u65af",flagCode:"ru",continent:V.a.EUROPE},IRL:{title:V.a.IRELAND_MAP,regionName:"\u7231\u5c14\u5170",flagCode:"ie",continent:V.a.EUROPE},CZE:{title:V.a.CZECHIA_MAP,regionName:"\u6377\u514b",flagCode:"cz",continent:V.a.EUROPE},ROU:{title:V.a.ROMANIA_MAP,regionName:"\u7f57\u9a6c\u5c3c\u4e9a",flagCode:"ro",continent:V.a.EUROPE},POL:{title:V.a.POLAND_MAP,regionName:"\u6ce2\u5170",flagCode:"pl",continent:V.a.EUROPE},BRA:{title:V.a.BRAZIL_MAP,regionName:"\u5df4\u897f",flagCode:"br",continent:V.a.SOUTH_AMERICA},CHL:{title:V.a.CHILE_MAP,regionName:"\u667a\u5229",flagCode:"cl",continent:V.a.SOUTH_AMERICA},MEX:{title:V.a.MEXICO_MAP,regionName:"\u58a8\u897f\u54e5",flagCode:"mx",continent:V.a.NORTH_AMERICA},ECU:{title:V.a.ECUADOR_MAP,regionName:"\u5384\u74dc\u591a\u5c14",flagCode:"ec",continent:V.a.SOUTH_AMERICA},PER:{title:V.a.PERU_MAP,regionName:"\u79d8\u9c81",flagCode:"pe",continent:V.a.SOUTH_AMERICA},COL:{title:V.a.COLOMBIA_MAP,regionName:"\u54e5\u4f26\u6bd4\u4e9a",flagCode:"co",continent:V.a.SOUTH_AMERICA},ARG:{title:V.a.ARGENTINA_MAP,regionName:"\u963f\u6839\u5ef7",flagCode:"ar",continent:V.a.SOUTH_AMERICA},ZAF:{title:V.a.SOUTH_AFRICA_MAP,regionName:"\u5357\u975e",flagCode:"za",continent:V.a.AFRICA},HKG:{title:V.a.HONGKONG_MAP,regionName:Q,flagCode:"hk",continent:V.a.ASIA},TRANSMISSION:{title:V.a.TRANSMISSION_NETWORK,continent:null}}),Te=function(e){return parseInt(e,10)!==e?"":Math.abs(e)<1e3?e:Math.abs(e)<Math.pow(10,6)?"".concat(e/1e3,"K"):Math.abs(e)<Math.pow(10,9)?"".concat(e/Math.pow(10,6),"M"):"".concat(e/Math.pow(10,9),"B")},Se=function(e){return parseInt(e,10)!==e?"":Math.abs(e)<1e3?Math.abs(e):"".concat(Math.abs(e)/1e3,"K")},Ne=function(e,t,a){return e%t===0?Object(B.a)(ce(a[e]),"M/d"):""},ke=function(e,t){return function(a){var n=a.point;return o.a.createElement("div",{className:"plot-tooltip plot-tooltip-line"},o.a.createElement("div",{className:n.data.name||n.data.regionName?"plot-tooltip-bold":""},n.data.name?"".concat(n.data.name," ").concat(n.data.years?"("+n.data.years+")":""):n.data.regionName?n.data.regionName:de(n.data.date,n.data.lang)),o.a.createElement("div",null,o.a.createElement("span",null,e[n.data.lang]),o.a.createElement("span",{className:"plot-tooltip-bold"}," ".concat(n.data.yFormatted))),o.a.createElement("div",null,o.a.createElement("span",null,t[n.data.lang]),o.a.createElement("span",{className:"plot-tooltip-bold"}," ".concat(n.data.xFormatted))))}},Me={anchor:"right",direction:"column",translateX:100,itemWidth:90,itemHeight:20,itemTextColor:"#000",symbolSize:12,symbolShape:"circle"},xe=function(e,t){var a="";return"plot_basic"===e?a="cumulative"===t.stats?"total":"new":"plot_fatality_recovery"===e?a="fatality_recovery":"plot_growth"===e?a="cumulative"===t.stats?"growth_total":"growth_new":"plot_one_vs_rest"===e?a="cumulative"===t.stats?"one_vs_rest":"one_vs_rest_new":"plot_fatality_line"===e?("show"===t.diseaseComparison&&(a="rate"===t.fatalityLine?"fatality_line":"fatality_line2"),"hide"===t.diseaseComparison&&(a="rate"===t.fatalityLine?"fatality_line_only":"fatality_line2_only")):"plot_ranking"===e?a="cumulative"===t.stats?"most_affected_subregions":"most_affected_subregions_new":"plot_subregion_basic"===e?a="cumulative"===t.stats?"subregion_total":"subregion_new":"plot_subregion_stream"===e?a="cumulative"===t.stats?"subregion_total_stream":"subregion_new_stream":"plot_subregion_active_stream"===e?a="subregion_active_stream":"plot_subregion_fatality"===e?("show"===t.diseaseComparison&&(a="rate"===t.fatalityLine?"subregion_fatality":"subregion_fatality2"),"hide"===t.diseaseComparison&&(a="rate"===t.fatalityLine?"subregion_fatality_only":"subregion_fatality2_only")):"plot_subregion_shifted"===e?("100"===t.shifted&&(a="cumulative"===t.stats?"subregion_total_shifted_100":"subregion_new_shifted_100"),"10"===t.shifted&&(a="cumulative"===t.stats?"subregion_total_shifted_10":"subregion_new_shifted_10")):"plot_doubling_time"===e?a="doubling_time":"plot_r0"===e&&(a="r0"),a},Re={plot_basic:{subregions:!1,metricChange:!1,statsChange:!0,scaleChange:!0,movingAverage:!0,text:V.a.CASES},plot_fatality_recovery:{subregions:!1,metricChange:!1,statsChange:!1,scaleChange:!1,movingAverage:!0,text:V.a.FATALITY_RECOVERY_RATE},plot_growth:{subregions:!1,metricChange:!0,statsChange:!0,scaleChange:!1,movingAverage:!0,text:V.a.GROWTH_RATE},plot_one_vs_rest:{subregions:!1,metricChange:!0,statsChange:!0,scaleChange:!0,movingAverage:!0,text:V.a.ONE_VS_REST},plot_fatality_line:{subregions:!1,metricChange:!1,statsChange:!1,scaleChange:!1,text:V.a.FATALITY_LINE},plot_doubling_time:{subregions:!1,metricChange:!0,statsChange:!1,scaleChange:!1,movingAverage:!0,text:V.a.CASE_DOUBLING_TIME},plot_r0:{subregions:!1,metricChange:!1,statsChange:!1,scaleChange:!1,movingAverage:!0,text:V.a.ESTIMATED_RO},plot_ranking:{subregions:!0,metricChange:!0,statsChange:!0,scaleChange:!1,text:V.a.MOST_AFFECTED_SUBREGIONS},plot_subregion_basic:{subregions:!0,metricChange:!0,statsChange:!0,scaleChange:!0,movingAverage:!0,text:V.a.SUBREGION},plot_subregion_shifted:{subregions:!0,metricChange:!0,statsChange:!0,scaleChange:!0,movingAverage:!0,text:V.a.SUBREGION_SHIFTED},plot_subregion_stream:{subregions:!0,metricChange:!0,statsChange:!0,scaleChange:!1,text:V.a.SUBREGION_STREAM},plot_subregion_active_stream:{subregions:!1,metricChange:!1,statsChange:!1,scaleChange:!1,text:V.a.SUBREGION_ACTIVE_STREAM},plot_subregion_fatality:{subregions:!0,metricChange:!1,statsChange:!1,scaleChange:!1,text:V.a.SUBREGION_FATALITY}},je={total:{type:"line",yAxisFormat:Te,xAxisFormat:V.a.PLOT_DATE_FORMAT,yFormat:",d",log:!0,legendItemWidth:100},new:{type:"line",yAxisFormat:Te,xAxisFormat:V.a.PLOT_DATE_FORMAT,yFormat:",d",log:!1,legendItemWidth:100},fatality_recovery:{type:"line",yAxisFormat:".2%",xAxisFormat:V.a.PLOT_DATE_FORMAT,yFormat:".2%",log:!1,legendItemWidth:150},growth_total:{type:"line",yAxisFormat:".0%",xAxisFormat:V.a.PLOT_DATE_FORMAT,yFormat:".2%",log:!1,legendItemWidth:50,yScale:{type:"linear",min:0,max:1}},growth_new:{type:"line",yAxisFormat:".0%",xAxisFormat:V.a.PLOT_DATE_FORMAT,yFormat:".2%",log:!1,legendItemWidth:50,yScale:{type:"linear",min:-2,max:2}},one_vs_rest:{type:"line",yAxisFormat:Te,xAxisFormat:V.a.PLOT_DATE_FORMAT,log:!0,legendItemWidth:150},one_vs_rest_new:{type:"line",yAxisFormat:Te,xAxisFormat:V.a.PLOT_DATE_FORMAT,log:!1,legendItemWidth:150},fatality_line:{type:"line",xFormat:",d",yFormat:".2%",xScale:{type:"log",min:1,max:Math.pow(10,9)},yScale:{type:"linear",min:0,max:.4},xAxisFormat:Te,yAxisFormat:".0%",legends:[],hideMarkers:!0,pointSize:4,xTickValues:Object(O.a)(Array(10).keys()).map((function(e){return Math.pow(10,e)})),yTickValues:[0,.1,.2,.3,.4],xTickRotation:0,xLegend:V.a.INFECTION_NUMBER,yLegend:V.a.FATALITY_RATE,enablePointLabel:!0,enableSlices:!1,pointLabel:function(e){return e.name},tooltip:ke(V.a.FATALITY_RATE,V.a.INFECTION_NUMBER)},fatality_line2:{type:"line",xFormat:",d",yFormat:",d",xScale:{type:"log",min:1,max:Math.pow(10,9)},yScale:{type:"log",min:1,max:Math.pow(10,8)},xAxisFormat:Te,yAxisFormat:Te,legends:[],hideMarkers:!0,pointSize:4,xTickValues:Object(O.a)(Array(10).keys()).map((function(e){return Math.pow(10,e)})),yTickValues:Object(O.a)(Array(9).keys()).map((function(e){return Math.pow(10,e)})),xTickRotation:0,xLegend:V.a.INFECTION_NUMBER,yLegend:V.a.DEATH_NUMBER,enablePointLabel:!0,enableSlices:!1,pointLabel:function(e){return"\u4e2d\u4e1c\u547c\u5438\u7efc\u5408\u5f81"===e.name?"".concat(e.name).concat("\u3000".repeat(8)):"MERS"===e.name?"".concat(e.name).concat("\u3000".repeat(3)):e.name},tooltip:ke(V.a.DEATH_NUMBER,V.a.INFECTION_NUMBER)},fatality_line_only:{type:"line",xFormat:",d",yFormat:".2%",xScale:{type:"log",min:"auto",max:"auto"},yScale:{type:"linear",min:"auto",max:"auto"},xAxisFormat:Te,yAxisFormat:".2%",legends:[],hideMarkers:!0,pointSize:4,xTickValues:Object(O.a)(Array(10).keys()).map((function(e){return Math.pow(10,e)})),xTickRotation:0,xLegend:V.a.INFECTION_NUMBER,yLegend:V.a.FATALITY_RATE,enablePointLabel:!1,enableSlices:!1,tooltip:ke(V.a.FATALITY_RATE,V.a.INFECTION_NUMBER)},fatality_line2_only:{type:"line",xFormat:",d",yFormat:",d",xScale:{type:"log",min:"auto",max:"auto"},yScale:{type:"log",min:"auto",max:"auto"},xAxisFormat:Te,yAxisFormat:Te,legends:[],hideMarkers:!0,pointSize:4,xTickValues:Object(O.a)(Array(10).keys()).map((function(e){return Math.pow(10,e)})),yTickValues:Object(O.a)(Array(9).keys()).map((function(e){return Math.pow(10,e)})),xTickRotation:0,xLegend:V.a.INFECTION_NUMBER,yLegend:V.a.DEATH_NUMBER,enablePointLabel:!1,enableSlices:!1,tooltip:ke(V.a.DEATH_NUMBER,V.a.INFECTION_NUMBER)},doubling_time:{type:"line",yAxisFormat:Te,xAxisFormat:V.a.PLOT_DATE_FORMAT,yFormat:"d",log:!1,legendItemWidth:50,yLegend:V.a.CASE_DOUBLING_TIME_IN_DAYS,enableSlices:!1,tooltip:function(e){var t=e.point;return o.a.createElement("div",{className:"plot-tooltip plot-tooltip-line"},o.a.createElement("div",null,de(t.data.xFormatted,t.data.lang)),o.a.createElement("div",{className:"plot-tooltip-bold"}," ".concat(t.data.yFormatted," ").concat(V.a.DAYS[t.data.lang])))}},r0:{type:"line",yAxisFormat:"d",xAxisFormat:V.a.PLOT_DATE_FORMAT,yFormat:".2f",log:!1,legends:[],yLegend:V.a.ESTIMATED_RO_SEIR,enableSlices:!1,tooltip:function(e){var t=e.point;return o.a.createElement("div",{className:"plot-tooltip plot-tooltip-line"},o.a.createElement("div",null,de(t.data.xFormatted,t.data.lang)),o.a.createElement("div",null,o.a.createElement("span",null,"R\u2080 \u2248 "),o.a.createElement("span",{className:"plot-tooltip-bold"},t.data.yFormatted)))}},most_affected_subregions:{type:"bump",log:!1,tooltip:function(e){var t=e.serie;return o.a.createElement("span",{className:"plot-tooltip plot-tooltip-bump",style:{color:t.color}},t.fullId,o.a.createElement("span",{className:"plot-tooltip-bold"}," ".concat(t.count)))}},most_affected_subregions_new:{type:"bump",log:!1,tooltip:function(e){var t=e.serie;return o.a.createElement("span",{className:"plot-tooltip plot-tooltip-bump",style:{color:t.color}},t.fullId,o.a.createElement("span",{className:"plot-tooltip-bold"}," ".concat(t.count)))}},subregion_total:{type:"line",margin:{right:115,bottom:30},yAxisFormat:Te,xAxisFormat:V.a.PLOT_DATE_FORMAT,yFormat:",d",log:!0,pointSize:0,enableSlices:!1,legends:[Me],tooltip:function(e){var t=e.point;return o.a.createElement("div",{className:"plot-tooltip plot-tooltip-line"},o.a.createElement("div",{className:"plot-tooltip-bold",style:{display:"flex",justifyContent:"center",alignItems:"center"}},o.a.createElement("span",null,o.a.createElement("div",{style:{height:12,width:12,backgroundColor:t.color,marginRight:5}})),o.a.createElement("span",null,t.serieId)),o.a.createElement("div",null,o.a.createElement("span",null,de(t.data.xFormatted,t.data.lang)),o.a.createElement("span",{className:"plot-tooltip-bold"}," ".concat(t.data.yFormatted))))}},subregion_new:{type:"line",margin:{right:115,bottom:30},yAxisFormat:Te,xAxisFormat:V.a.PLOT_DATE_FORMAT,yFormat:",d",log:!1,pointSize:0,enableSlices:!1,legends:[Me],tooltip:function(e){var t=e.point;return o.a.createElement("div",{className:"plot-tooltip plot-tooltip-line"},o.a.createElement("div",{className:"plot-tooltip-bold",style:{display:"flex",justifyContent:"center",alignItems:"center"}},o.a.createElement("span",null,o.a.createElement("div",{style:{height:12,width:12,backgroundColor:t.color,marginRight:5}})),o.a.createElement("span",null,t.serieId)),o.a.createElement("div",null,o.a.createElement("span",null,de(t.data.xFormatted,t.data.lang)),o.a.createElement("span",{className:"plot-tooltip-bold"}," ".concat(t.data.yFormatted))))}},subregion_total_stream:{type:"stream",yAxisFormat:Se,xAxisFormat:Ne,log:!1,legends:[Me]},subregion_new_stream:{type:"stream",yAxisFormat:Se,xAxisFormat:Ne,log:!1,legends:[Me]},subregion_active_stream:{type:"stream",yAxisFormat:Se,xAxisFormat:Ne,log:!1,legends:[Me]},subregion_fatality:{type:"line",subregions:!0,log:!1,xLog:!0,margin:{left:60},xFormat:",d",yFormat:".2%",xScale:{type:"log",min:1,max:Math.pow(10,9)},yScale:{type:"linear",min:0,max:.4},xAxisFormat:Te,yAxisFormat:".1%",legends:[],hideMarkers:!0,pointSize:10,pointBorderWidth:2,xTickValues:Object(O.a)(Array(10).keys()).map((function(e){return Math.pow(10,e)})),yTickValues:[0,.1,.2,.3,.4],xTickRotation:0,xLegend:V.a.CONFIRMED,yLegend:V.a.FATALITY_RATE,yLegendOffset:-50,enablePointLabel:!0,enableSlices:!1,pointLabelYOffset:-10,pointLabel:function(e){return e.name},tooltip:ke(V.a.FATALITY_RATE,V.a.CONFIRMED)},subregion_fatality2:{type:"line",subregions:!0,log:!1,xLog:!0,xScale:{type:"log",min:1,max:Math.pow(10,9)},yScale:{type:"log",min:1,max:Math.pow(10,8)},margin:{left:60},xFormat:",d",yFormat:",d",xAxisFormat:Te,yAxisFormat:Te,legends:[],hideMarkers:!0,pointSize:10,pointBorderWidth:2,xTickValues:Object(O.a)(Array(10).keys()).map((function(e){return Math.pow(10,e)})),yTickValues:Object(O.a)(Array(9).keys()).map((function(e){return Math.pow(10,e)})),xTickRotation:0,xLegend:V.a.CONFIRMED,yLegend:V.a.DEATHS,yLegendOffset:-50,enablePointLabel:!0,enableSlices:!1,pointLabelYOffset:-10,pointLabel:function(e){return"\u4e2d\u4e1c\u547c\u5438\u7efc\u5408\u5f81"===e.name?"".concat(e.name).concat("\u3000".repeat(8)):"MERS"===e.name?"".concat(e.name).concat("\u3000".repeat(3)):e.name},tooltip:ke(V.a.DEATHS,V.a.CONFIRMED)},subregion_fatality_only:{type:"line",subregions:!0,log:!1,xLog:!0,margin:{left:60},xFormat:",d",yFormat:".2%",xAxisFormat:Te,yAxisFormat:".1%",legends:[],hideMarkers:!0,pointSize:10,pointBorderWidth:2,xTickValues:Object(O.a)(Array(10).keys()).map((function(e){return Math.pow(10,e)})),xTickRotation:0,xLegend:V.a.CONFIRMED,yLegend:V.a.FATALITY_RATE,yLegendOffset:-50,enablePointLabel:!1,enableSlices:!1,tooltip:ke(V.a.FATALITY_RATE,V.a.CONFIRMED)},subregion_fatality2_only:{type:"line",subregions:!0,log:!1,xLog:!0,yScale:{type:"log",min:"auto",max:"auto"},margin:{left:60},xFormat:",d",yFormat:",d",xAxisFormat:Te,yAxisFormat:Te,legends:[],hideMarkers:!0,pointSize:10,pointBorderWidth:2,xTickValues:Object(O.a)(Array(10).keys()).map((function(e){return Math.pow(10,e)})),yTickValues:Object(O.a)(Array(9).keys()).map((function(e){return Math.pow(10,e)})),xTickRotation:0,xLegend:V.a.CONFIRMED,yLegend:V.a.DEATHS,yLegendOffset:-50,enablePointLabel:!1,enableSlices:!1,tooltip:ke(V.a.DEATHS,V.a.CONFIRMED)},subregion_total_shifted_100:{type:"line",margin:{right:115},yAxisFormat:Te,xAxisFormat:"d",xFormat:"d",yFormat:",d",xScale:{type:"linear",min:"auto",max:"auto"},log:!0,pointSize:0,enableSlices:!1,legends:[Me],xLegend:V.a.DAYS_AFTER_100_CASES,tooltip:function(e){var t=e.point;return o.a.createElement("div",{className:"plot-tooltip plot-tooltip-line"},o.a.createElement("div",{className:"plot-tooltip-bold",style:{display:"flex",justifyContent:"center",alignItems:"center"}},o.a.createElement("span",null,o.a.createElement("div",{style:{height:12,width:12,backgroundColor:t.color,marginRight:5}})),o.a.createElement("span",null,t.serieId)),o.a.createElement("div",null,o.a.createElement("span",null,"".concat(V.a.DAY_0[t.data.lang].replace(0,t.data.x)," (").concat(de(t.data.date,t.data.lang),")")),o.a.createElement("span",{className:"plot-tooltip-bold"}," ".concat(t.data.yFormatted))))}},subregion_new_shifted_100:{type:"line",margin:{right:115},yAxisFormat:Te,xAxisFormat:"d",xFormat:"d",yFormat:",d",xScale:{type:"linear",min:"auto",max:"auto"},log:!1,pointSize:0,enableSlices:!1,legends:[Me],xLegend:V.a.DAYS_AFTER_100_CASES,tooltip:function(e){var t=e.point;return o.a.createElement("div",{className:"plot-tooltip plot-tooltip-line"},o.a.createElement("div",{className:"plot-tooltip-bold",style:{display:"flex",justifyContent:"center",alignItems:"center"}},o.a.createElement("span",null,o.a.createElement("div",{style:{height:12,width:12,backgroundColor:t.color,marginRight:5}})),o.a.createElement("span",null,t.serieId)),o.a.createElement("div",null,o.a.createElement("span",null,"".concat(V.a.DAY_0[t.data.lang].replace(0,t.data.x)," (").concat(de(t.data.date,t.data.lang),")")),o.a.createElement("span",{className:"plot-tooltip-bold"}," ".concat(t.data.yFormatted))))}},subregion_total_shifted_10:{type:"line",margin:{right:115},yAxisFormat:Te,xAxisFormat:"d",xFormat:"d",yFormat:",d",xScale:{type:"linear",min:"auto",max:"auto"},log:!0,pointSize:0,enableSlices:!1,legends:[Me],xLegend:V.a.DAYS_AFTER_10_CASES,tooltip:function(e){var t=e.point;return o.a.createElement("div",{className:"plot-tooltip plot-tooltip-line"},o.a.createElement("div",{className:"plot-tooltip-bold",style:{display:"flex",justifyContent:"center",alignItems:"center"}},o.a.createElement("span",null,o.a.createElement("div",{style:{height:12,width:12,backgroundColor:t.color,marginRight:5}})),o.a.createElement("span",null,t.serieId)),o.a.createElement("div",null,o.a.createElement("span",null,"".concat(V.a.DAY_0[t.data.lang].replace(0,t.data.x)," (").concat(de(t.data.date,t.data.lang),")")),o.a.createElement("span",{className:"plot-tooltip-bold"}," ".concat(t.data.yFormatted))))}},subregion_new_shifted_10:{type:"line",margin:{right:115},yAxisFormat:Te,xAxisFormat:"d",xFormat:"d",yFormat:",d",xScale:{type:"linear",min:"auto",max:"auto"},log:!1,pointSize:0,enableSlices:!1,legends:[Me],xLegend:V.a.DAYS_AFTER_10_CASES,tooltip:function(e){var t=e.point;return o.a.createElement("div",{className:"plot-tooltip plot-tooltip-line"},o.a.createElement("div",{className:"plot-tooltip-bold",style:{display:"flex",justifyContent:"center",alignItems:"center"}},o.a.createElement("span",null,o.a.createElement("div",{style:{height:12,width:12,backgroundColor:t.color,marginRight:5}})),o.a.createElement("span",null,t.serieId)),o.a.createElement("div",null,o.a.createElement("span",null,"".concat(V.a.DAY_0[t.data.lang].replace(0,t.data.x)," (").concat(de(t.data.date,t.data.lang),")")),o.a.createElement("span",{className:"plot-tooltip-bold"}," ".concat(t.data.yFormatted))))}}},we=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={dropdownOpen:!1,height:-1},a.updateHeight=function(){var e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;a.setState({height:e})},a.mapToggle=function(e){e!==a.props.currentMap&&(a.props.mapToggle(e),e===Z||e===X?a.props.currentMap!==Z&&a.props.currentMap!==X&&a.props.regionToggle(["\u4e2d\u56fd"],!1):e===J||"US2"===e?a.props.currentMap!==J&&"US2"!==a.props.currentMap&&a.props.regionToggle([ne],!1):"ITA"===e||"ITA2"===e?"ITA"!==a.props.currentMap&&"ITA2"!==a.props.currentMap&&a.props.regionToggle([ae],!1):"HKG"===e?a.props.regionToggle(["\u4e2d\u56fd",Q],!1):"TRANSMISSION"!==e&&a.props.regionToggle([_e[e].regionName],!1)),a.setState({dropdownOpen:!a.state.dropdownOpen})},a.metricToggle=function(e){var t=e.target.getAttribute("value");t!==a.props.metric&&a.props.metricToggle(t)},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.updateHeight(),window.addEventListener("resize",this.updateHeight)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateHeight)}},{key:"render",value:function(){var e=this,t=this.props,a=t.lang,r=t.metric,i=t.currentMap,c=t.fullPlot,s=t.fullTree,u=t.plotType;return o.a.createElement("div",{className:"map-nav-bar-wrap ".concat(c&&!Re[u].metricChange?"grey-out":"")},o.a.createElement("ul",{className:"map-nav-bar"},["confirmedCount","deadCount","curedCount"].map((function(t){return o.a.createElement("li",{key:"map-nav-".concat(t),className:t===r?"current":""},o.a.createElement("div",{value:t,onClick:e.metricToggle},me[t][a]))}))),!c&&!s&&o.a.createElement(Ee.a,{className:"map-toggle"},o.a.createElement(ve.a,{className:"map-toggle-button",tag:"span","data-toggle":"dropdown","aria-expanded":this.state.dropdownOpen},o.a.createElement(Ae.a,{size:14,style:{marginRight:10}}),o.a.createElement("span",null,_e[i].title[a])),o.a.createElement(Oe.a,{modifiers:{setMaxHeight:{enabled:!0,order:890,fn:function(t){return Object(l.a)({},t,{styles:Object(l.a)({},t.styles,{overflowY:"auto",maxHeight:.5*e.state.height})})}}}},["Global","Asia","Europe","North America","South America","Oceania","Africa",null].map((function(t){return Object.keys(_e).filter((function(e){return _e[e].continent===t||_e[e].continent&&_e[e].continent.en===t})).map((function(r,l){return o.a.createElement(n.Fragment,{key:"map-".concat(l)},"TRANSMISSION"===r?o.a.createElement(Ce.a,{divider:!0}):o.a.createElement("div",null),0===l&&null!=t&&"Global"!==t?o.a.createElement(n.Fragment,null,o.a.createElement(Ce.a,{divider:!0}),o.a.createElement(Ce.a,{header:!0},_e[r].continent[a])):o.a.createElement("div",null),o.a.createElement(Ce.a,{className:i===r?"current":"",onClick:function(){return e.mapToggle(r)}},"TRANSMISSION"!==r&&o.a.createElement("span",{className:"flag-icon ".concat(_e[r].flagCode?"flag-icon-"+_e[r].flagCode:"")}),_e[r].title[a]))}))})))))}}]),t}(n.Component),Ie=a(118),De=a(321),Le=a(339);var Fe=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.date,a=e.lang,r=e.startDate,i=e.endDate,l=e.handleDateChange,c=e.handleTempDateChange,s=e.fullMap,u=e.fullPlot,d=e.plotDates,p=ce(r),m=ce(i);p=new Date(p.getTime()+6e4*(m.getTimezoneOffset()-p.getTimezoneOffset()));var g=(m-p)/864e5,f=Math.round(g/(s?15:10)),h=Object(De.b)().domain([p,m]).ticks(Le.a.filter((function(e){return Le.a.count(0,e)%f===0}))).map((function(e){return+e})),y=u?d:[t];return y=y.map((function(e){var t=ce(e);return+(t=new Date(t.getTime()+6e4*(m.getTimezoneOffset()-t.getTimezoneOffset())))})),o.a.createElement(Ie.c,{className:"date-slider",mode:1,step:864e5,domain:[+p,+m],onChange:function(e){u||l(pe(e[0],i).slice(0,10))},onUpdate:c,values:y},o.a.createElement(Ie.b,null,(function(e){var t=e.getRailProps;return o.a.createElement(n.Fragment,null,o.a.createElement("div",Object.assign({className:"date-slider-rail-outer"},t())),o.a.createElement("div",{className:"date-slider-rail-inner"}))})),o.a.createElement(Ie.a,null,(function(e){var t=e.handles,a=e.getHandleProps;return o.a.createElement("div",null,t.map((function(e,t){return o.a.createElement(n.Fragment,{key:"handle-".concat(t)},o.a.createElement("div",Object.assign({className:"date-slider-handle-outer",style:{left:"".concat(e.percent,"%")}},a(e.id))),o.a.createElement("div",{role:"slider",className:"date-slider-handle-inner","aria-valuemin":+p,"aria-valuemax":+m,"aria-valuenow":e.value,style:{left:"".concat(e.percent,"%")}}))})))})),o.a.createElement(Ie.e,{left:!u,right:!1},(function(e){var t=e.tracks,a=e.getTrackProps;return o.a.createElement("div",null,t.map((function(e){var t=e.id,n=e.source,r=e.target;return o.a.createElement("div",Object.assign({key:"track-".concat(t),className:"date-slider-track",style:{left:"".concat(n.percent,"%"),width:"".concat(r.percent-n.percent,"%")}},a()))})))})),o.a.createElement(Ie.d,{values:h},(function(e){var t=e.ticks;return o.a.createElement("div",null,t.map((function(e,n){return o.a.createElement("div",{key:"tick-".concat(n)},o.a.createElement("div",{className:"date-slider-tick",style:{left:"".concat(e.percent,"%")}}),o.a.createElement("div",{className:"date-slider-tick-text",style:{marginLeft:"".concat(-100/t.length/2,"%"),width:"".concat(100/t.length,"%"),left:"".concat(e.percent,"%")}},function(e,t){return Object(B.a)(new Date(e),V.a.DATE_FORMAT_1[t])}(e.value,a)))})))})))}}]),t}(n.Component),Pe=a(76),He=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).animationLoop=function(){return setTimeout((function(){a.props.playing&&(a.dateForward(),a.animationLoop())}),500)},a.dateForward=function(){var e=a.props,t=e.date,n=e.startDate,o=e.endDate,r=e.plotDates,i=e.fullPlot,l=e.handleDateChange;l(i?se(t,r[0],r[1]):se(t,n,o))},a.dateBackward=function(){var e=a.props,t=e.date,n=e.startDate,o=e.endDate,r=e.plotDates,i=e.fullPlot,l=e.handleDateChange;l(i?ue(t,r[0],r[1]):ue(t,n,o))},a.startAnimation=function(){return a.props.playingToggle()},a.stopAnimation=function(){a.props.playingToggle(),a.forceUpdate()},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.props.playing&&this.animationLoop()}},{key:"shouldComponentUpdate",value:function(e,t){return!this.props.playing}},{key:"render",value:function(){var e=this.props.playing;return o.a.createElement("div",{className:"anime-ctrl"},o.a.createElement("div",{className:"anime-ctrl-left-right ".concat(e?"anime-ctrl-playing":"")},o.a.createElement(Pe.b,{size:30,onClick:this.dateBackward})),o.a.createElement("div",{className:"anime-ctrl-play"},e?o.a.createElement(Pe.e,{size:30,onClick:this.stopAnimation}):o.a.createElement(Pe.f,{size:30,onClick:this.startAnimation})),o.a.createElement("div",{className:"anime-ctrl-left-right ".concat(e?"anime-ctrl-playing":"")},o.a.createElement(Pe.c,{size:30,onClick:this.dateForward})))}}]),t}(n.Component),Ue=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.currentRegion,n=e.date,r=e.lang,i=e.fullPlot,l=e.fullTree;return null==t?o.a.createElement("div",null):o.a.createElement("div",{className:"counts-wrap"},!i&&!l&&["confirmedCount","deadCount","curedCount"].map((function(e){var i=Object.keys(ge(t,a)[e]).length>0?ge(t,a)[e][n]:"\u2014",l=ue(n,"2019-09-01","2050-01-01"),c=Object.keys(ge(t,a)[e]).length>0?ge(t,a)[e][l]:0,s=0;return null!=parseInt(i)&&null!=parseInt(c)&&(s=parseInt(i)-parseInt(c)),o.a.createElement("div",{key:"".concat(e,"-number"),className:"count-wrap"},o.a.createElement("div",{className:"count"},i?i.toLocaleString():0),o.a.createElement("div",{className:"count-title"},me[e][r]),o.a.createElement("div",{className:"count-daily"},null!=s&&!isNaN(s)&&o.a.createElement("span",null,"".concat(V.a.NEWCASE[r]," ").concat(s>=0?"+":"").concat(s.toLocaleString()))))})))}}]),t}(n.Component),ze=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={dropdownOpen:!1,height:-1},a.updateHeight=function(){var e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;a.setState({height:e})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.updateHeight(),window.addEventListener("resize",this.updateHeight)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateHeight)}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentPlotType,r=t.currentRegion,i=t.lang,c=t.data,s=t.onPlotTypeChange,u=Re[a],d=1===r.length&&r[0]===q,p=Object.keys(ge(c,r)).length>4||d;return o.a.createElement(Ee.a,{className:""},o.a.createElement(ve.a,{tag:"span",className:"line-plot-title","data-toggle":"dropdown","aria-expanded":this.state.dropdownOpen},o.a.createElement("span",null,u.text[i]),o.a.createElement(Pe.a,{size:20,className:"dropdown-arrow"})),o.a.createElement(Oe.a,{modifiers:{setMaxHeight:{enabled:!0,order:890,fn:function(t){return Object(l.a)({},t,{styles:Object(l.a)({},t.styles,{overflowY:"auto",maxHeight:.6*e.state.height})})}}}},Object.keys(Re).map((function(t){return"plot_one_vs_rest"===t&&d?o.a.createElement("div",{key:"dropdown-".concat(t)}):Re[t].subregions&&!p?o.a.createElement("div",{key:"dropdown-".concat(t)}):o.a.createElement(n.Fragment,{key:"dropdown-".concat(t)},"plot_basic"===t&&p&&o.a.createElement(Ce.a,{header:!0},V.a.OVERALL[i]),"plot_ranking"===t&&p&&o.a.createElement(Ce.a,{divider:!0}),"plot_ranking"===t&&p&&o.a.createElement(Ce.a,{header:!0},V.a.SUBREGIONS[i]),o.a.createElement(Ce.a,{className:a===t?"current":"",onClick:function(){s(t),e.setState({dropdownOpen:!e.state.dropdownOpen})}},Re[t].text[i]))}))))}}]),t}(n.Component),Ge=a(581),We=a(317),Be=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.texts,n=e.selected,r=e.onSelect,i=e.alwaysShow,l=e.disabled;return o.a.createElement("div",{className:"plot-nav-bar-btn ".concat(l?"grey-out":""),style:i?{display:"flex"}:{}},o.a.createElement("div",{className:"plot-nav-bar-btn-title"},t),o.a.createElement(Ge.a,null,Object.keys(a).map((function(e){return o.a.createElement(We.a,{className:"radio-btn",key:e,color:"secondary",onClick:function(){return r(e)},active:n===e},a[e])}))))}}]),t}(n.Component),Ye=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.plotType,a=e.plotSpecificType,n=e.lang,r=e.onSelect,i=e.plotDetails,l=e.scale,c=e.scaleToggle;return o.a.createElement("div",{className:"plot-nav-bar"},Re[t].statsChange&&o.a.createElement(Be,{title:V.a.TYPE[n],texts:{cumulative:V.a.CUMULATIVE[n],daily:V.a.DAILY[n]},selected:i.stats,onSelect:function(e){return r("stats",e)},alwaysShow:!0}),("plot_fatality_line"===t||"plot_subregion_fatality"===t)&&o.a.createElement(Be,{title:V.a.Y_AXIS[n],texts:{rate:V.a.RATE[n],deaths:V.a.DEATH_NUMBER2[n]},selected:i.fatalityLine,onSelect:function(e){return r("fatalityLine",e)}}),("plot_fatality_line"===t||"plot_subregion_fatality"===t)&&o.a.createElement(Be,{title:V.a.COMPARISONS[n],texts:{show:V.a.SHOW[n],hide:V.a.HIDE[n]},selected:i.diseaseComparison,onSelect:function(e){return r("diseaseComparison",e)}}),"plot_subregion_shifted"===t&&o.a.createElement(Be,{title:V.a.DAY_0[n],texts:{10:V.a.TEN_CASES[n],100:V.a.HUNDRED_CASES[n]},selected:i.shifted,onSelect:function(e){return r("shifted",e)}}),Re[t].scaleChange&&o.a.createElement(Be,{title:V.a.SCALE[n],texts:{linear:V.a.LINEAR_SCALE[n],log:V.a.LOG_SCALE[n]},selected:l,onSelect:function(e){return c(e)},disabled:!je[a].log}),"stream"===je[a].type&&o.a.createElement(Be,{title:V.a.Y_AXIS[n],texts:{expand:V.a.PERCENT[n],silhouette:V.a.CASE_NUMBERS[n]},selected:i.stream,onSelect:function(e){return r("stream",e)}}),"plot_fatality_recovery"===t&&o.a.createElement(Be,{title:V.a.RECOVERY_RATE[n],texts:{show:V.a.SHOW[n],hide:V.a.HIDE[n]},selected:i.recoveryRate,onSelect:function(e){return r("recoveryRate",e)}}),Re[t].movingAverage&&o.a.createElement(Be,{title:V.a.MOVING_AVERAGE[n],texts:{"1d":"\u2014","3d":V.a.THREE_DAYS[n],"5d":V.a.FIVE_DAYS[n]},selected:i.movingAverage,onSelect:function(e){return r("movingAverage",e)}}))}}]),t}(n.Component),Ve=a(322),Ke=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.currentRegion,n=t.fullPlot,r=t.darkMode,i=t.scale,c=t.lang,s=t.playing,u=t.tempDate,d=t.startDate,p=t.endDate,m=t.plotParameters,g=t.plotDataAll,f=t.tickValues,h=t.plotTheme,y=t.currentMap;return"line"!==m.type?o.a.createElement("div",null):o.a.createElement(Ve.a,{margin:Object(l.a)({top:20,right:20,bottom:n?80:60,left:50},m.margin),theme:h,animate:n||"US2"!==y||"US2"===y&&a.length>=2&&a[1]in L.a,data:g.plotData,colors:function(e){return e.color},xFormat:null!=m.xFormat?m.xFormat:"time:%Y-%m-%d",yFormat:m.yFormat,xScale:null!=m.xScale?m.xScale:m.xLog?{type:"log",min:g.logTickMin,max:g.logTickMax}:{type:"time",format:"%Y-%m-%d",precision:"day",useUTC:!1},yScale:null!=m.yScale?m.yScale:"linear"!==i&&m.log?{type:"log",min:g.logTickMin,max:g.logTickMax}:{type:"linear",max:"auto",min:"auto"},axisLeft:{orient:"left",format:m.yAxisFormat,tickSize:0,tickValues:null!=m.yTickValues?m.yTickValues:f,legend:null!=m.yLegend?m.yLegend[c]:"",legendOffset:null!=m.yLegendOffset?m.yLegendOffset:-40,legendPosition:"middle"},axisBottom:{orient:"bottom",format:Object(m.xAxisFormat)!==m.xAxisFormat?m.xAxisFormat:m.xAxisFormat[c],tickValues:null!=m.xTickValues?m.xTickValues:n?10:5,tickRotation:null!=m.xTickRotation?m.xTickRotation:n?-30:0,legend:null!=m.xLegend?m.xLegend[c]:"",legendOffset:40,legendPosition:"middle"},enableGridX:!1,gridYValues:null!=m.yTickValues?m.yTickValues:f,pointSize:null!=m.pointSize?m.pointSize:6,pointBorderWidth:m.pointBorderWidth,pointBorderColor:r?"var(--primary-color-4)":"var(--primary-color-5)",useMesh:!0,enableArea:!1,enablePointLabel:m.enablePointLabel,pointLabel:m.pointLabel,pointLabelYOffset:m.pointLabelYOffset?m.pointLabelYOffset:-6,enableSlices:null!=m.enableSlices?m.enableSlices:"x",curve:"monotoneX",tooltip:m.tooltip,markers:m.hideMarkers?[]:s||u===d||u===p?[]:[{axis:"x",value:ce(u),lineStyle:{stroke:r?"var(--primary-color-4)":"var(--primary-color-5)",strokeWidth:1,strokeDasharray:"6 6"}}],legends:null!=m.legends?m.legends:[{anchor:"bottom",direction:"row",justify:!1,translateX:0,translateY:n?70:50,itemsSpacing:10,itemDirection:"left-to-right",itemWidth:m.legendItemWidth,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[]}],onClick:function(t){var n=t.serieId,o=t.data;k.isMobile||k.isIPad13||m.subregions&&null!=n&&!o.noClick&&e.props.regionToggle(1===a.length&&a[0]===q?[n]:[].concat(Object(O.a)(a),[n]))}})}}]),t}(n.Component),Ze=a(328),Xe=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.darkMode,a=e.plotParameters,n=e.plotDataAll,r=e.plotTheme,i=e.offsetType,l=e.fullPlot;if("stream"!==a.type)return o.a.createElement("div",null);var c=function(e){return t?[0,1,2,3,4,5].map((function(e){return"var(--primary-color-".concat(e,")")}))[n.plotKeys.length-1-e.index]:[8,6,5,4,3,2].map((function(e){return"var(--primary-color-".concat(e,")")}))[n.plotKeys.length-1-e.index]};return l&&(c=function(e){return t?Object(O.a)(Array(10).keys()).map((function(e){return"var(--primary-color-".concat(e,")")}))[n.plotKeys.length-1-e.index]:Object(O.a)(Array(10).keys()).reverse().map((function(e){return"var(--primary-color-".concat(e,")")}))[n.plotKeys.length-1-e.index]}),o.a.createElement(Ze.a,{data:n.plotData,keys:n.plotKeys,theme:r,curve:"monotoneX",margin:{top:20,right:115,bottom:35,left:40},axisTop:null,axisRight:null,axisBottom:{orient:"bottom",tickSize:0,tickPadding:5,tickRotation:l?-30:0,format:function(e){var t=l?10:5;return a.xAxisFormat(e,Math.round(n.plotData.length/t),n.dates)}},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,tickValues:5,format:"expand"!==i?a.yAxisFormat:".0%"},offsetType:i,colors:c,fillOpacity:.85,animate:!1,enableGridX:!1,enableGridY:!0,legends:a.legends,isInteractive:!0,enableStackTooltip:!0,tooltipFormat:function(e){return o.a.createElement("b",null,e.value)}})}}]),t}(n.Component),Je=a(331),qe=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.currentRegion,n=t.plotParameters,r=t.plotDataAll,i=t.plotTheme;return"bump"!==n.type?o.a.createElement("div",null):o.a.createElement(Je.a,{data:r.plotData,theme:i,margin:{top:10,right:100,bottom:20,left:50},colors:function(e){return e.color},lineWidth:2,activeLineWidth:4,inactiveLineWidth:2,inactiveOpacity:.15,pointSize:0,activePointSize:0,inactivePointSize:0,pointBorderWidth:3,activePointBorderWidth:3,enableGridX:!1,enableGridY:!1,axisRight:null,axisTop:null,axisBottom:null,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0},onClick:function(t){k.isMobile||k.isIPad13||e.props.regionToggle(1===a.length&&a[0]===q?[t.name]:[].concat(Object(O.a)(a),[t.name]))},tooltip:n.tooltip})}}]),t}(n.Component),$e=a(44),Qe=a.n($e),et={confirmedCount:"var(--primary-color-4)",deadCount:"var(--primary-color-10)",curedCount:"var(--primary-color-2)"},tt={confirmedCount:"var(--primary-color-4)",deadCount:"var(--lighter-grey)",curedCount:"var(--primary-color-2)"},at=function(e){var t=e.data,a=e.date,n=e.currentRegion,o=e.lang,r=e.darkMode,i=e.playing,c=e.scale,s=e.plotSpecificType,u=e.plotDetails,d=e.plotDates,p=e.fullPlot,m=arguments.length>1&&void 0!==arguments[1]&&arguments[1],g=0,f=1e5,h=["deadCount","curedCount","confirmedCount"].map((function(e){var l=ge(t,n)[e];return{id:me[e][o],color:r?tt[e]:et[e],data:Object.keys(l).sort((function(e,t){return ce(e)>ce(t)?1:-1})).filter((function(e){return!i||ce(e)<=ce(a)})).map((function(e){return l[e]>g&&(g=l[e]),l[e]<f&&(f=l[e]),"linear"===c||l[e]>0?{x:e,y:l[e]}:null})).filter((function(e){return null!=e}))}}));return h=gt(h,u.movingAverage),m||(h=ft(h,d)),Object(l.a)({plotData:h},bt(c,s,p,f,g))},nt=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=at(e,!0),n=a.plotData;return n=mt(n),t||(n=ft(n,e.plotDates)),{plotData:n}},ot=function(e){var t=("growth_new"!==e.plotSpecificType?at(e,!0):nt(e,!0)).plotData,a=e.metric;return t.forEach((function(e){e.data=e.data.reduce((function(t,a,n){return[].concat(Object(O.a)(t),[e.data[n-1]&&e.data[n-1].y>0?Object(l.a)({},a,{y:(a.y-e.data[n-1].y)/e.data[n-1].y}):Object(l.a)({},a,{y:0})])}),[])})),"confirmedCount"===a&&(t=[t[2]]),"curedCount"===a&&(t=[t[1]]),"deadCount"===a&&(t=[t[0]]),{plotData:t=ft(t,e.plotDates)}},rt=function(e){var t=e.data,a=e.currentRegion,n=e.metric,o=e.lang,r=e.date,i=e.playing,c=e.scale,s=e.plotSpecificType,u=e.plotDetails,d=e.plotDates,p=e.fullPlot,m=0,g=1e5,f=ge(t,a),h=f[n],y="zh"===o?a[a.length-1]:f.ENGLISH;y=fe(y,o);var b=1===a.length?[q]:a.slice(0,a.length-1),E=ge(t,b),v=E[n],O="zh"===o?b[b.length-1]:E.ENGLISH;O=fe(O,o);var C=[],A={id:"zh"===o?"".concat(O," (").concat(V.a.REST[o],")"):"".concat(V.a.REST[o]," of ").concat(O),color:"var(--primary-color-4)",data:Object.keys(v).filter((function(e){return!i||ce(e)<=ce(r)})).map((function(e){return null==h[e]?null:(v[e]-h[e]>m&&(m=v[e]-h[e]),v[e]-h[e]<g&&(g=v[e]-h[e]),"linear"===c||v[e]-h[e]>0?{x:e,y:v[e]-h[e]}:null)})).filter((function(e){return null!=e}))},_={id:y,color:"var(--primary-color-2)",data:Object.keys(h).filter((function(e){return!i||ce(e)<=ce(r)})).map((function(e){return null==v[e]?null:(h[e]>m&&(m=h[e]),h[e]<g&&(g=h[e]),"linear"===c||h[e]>0?{x:e,y:h[e]}:null)})).filter((function(e){return null!=e}))};return C.push(A),C.push(_),"one_vs_rest_new"===s&&(C=mt(C)),C=gt(C,u.movingAverage),C=ft(C,d),Object(l.a)({plotData:C},bt(c,s,p,g,m))},it=function(e){var t=e.data,a=e.currentRegion,n=e.metric,o=e.lang,r=e.darkMode,i=e.playing,l=e.date,c=e.plotDates,s=e.plotSpecificType,u=pt(t,a),d=i?ht(t,a,n,10):ht(t,a,n,10,l),p={},m=[],g=d.map((function(e,t){return m=[].concat(Object(O.a)(m),Object(O.a)(Object.keys(u[e][n]))),m=Object(O.a)(new Set(m)),p[e]=t,e})).map((function(e,t){var a="zh"===o?e:u[e].ENGLISH,i=Object.keys(u[e][n]).sort((function(e,t){return ce(e)>ce(t)?1:-1})).filter((function(e){return ce(e)<=ce(l)})).filter((function(e){return ce(e)<=ce(c[1])&&ce(e)>=ce(c[0])})).map((function(t){return u[e][n][t]})),d=i[i.length-1];return"most_affected_subregions_new"===s&&(d=i.length>=2?i[i.length-1]-i[i.length-2]:i[i.length-1]),{id:fe(a,o),fullId:a,name:e,color:"var(--primary-color-".concat(r?t<7?t:t+1:10-t,")"),count:d,data:[]}}));m=m.sort((function(e,t){return ce(e)>ce(t)?1:-1}));var f={};return m.filter((function(e){return ce(e)<=ce(l)})).filter((function(e){return ce(e)<=ce(c[1])&&ce(e)>=ce(c[0])})).forEach((function(e,t){var a=[];g.forEach((function(o){var r=u[o.name][n][e]?u[o.name][n][e]:0;"most_affected_subregions_new"===s&&t>0&&u[o.name][n][m[t-1]]&&(r-=u[o.name][n][m[t-1]]),a.push({region:o.name,counts:r})})),(a=a.sort((function(e,t){return e.counts<=t.counts?1:-1}))).forEach((function(t,a){0===t.counts&&null==f[t.region]?g[p[t.region]].data.push({x:e,y:null}):(f[t.region]=!0,g[p[t.region]].data.push({x:e,y:a+1}))}))})),{plotData:g,dates:m}},lt=function(e){var t=e.data,a=e.currentRegion,n=e.lang,o=e.playing,r=e.date,i=e.plotDates,l=e.metric,c=e.plotSpecificType,s=e.fullPlot,u=pt(t,a),d=[],p=[],m=s?9:5,g=ht(t,a,"subregion_active_stream"===c?"confirmedCount":l,m).map((function(e){return d=[].concat(Object(O.a)(d),Object(O.a)(Object.keys(u[e].confirmedCount))),d=Object(O.a)(new Set(d)),e})).map((function(e){var t="zh"===n?e:u[e].ENGLISH;return{id:fe(t,n),fullId:t,name:e}})),f=g.map((function(e){return e.id}));if(Object.keys(u).length>=m+5&&(f=[].concat(Object(O.a)(f),[V.a.OTHERS[n]])),f=f.reverse(),d=(d=d.sort((function(e,t){return ce(e)>ce(t)?1:-1}))).filter((function(e){return ce(e)<=ce(i[1])&&ce(e)>=ce(i[0])})),0===g.length){d=Object.keys(u.confirmedCount).sort((function(e,t){return ce(e)>ce(t)?1:-1}));var h="zh"===n?a[a.length-1]:u.ENGLISH;f=[h=fe(h,n)]}return d.filter((function(e){return!o||ce(e)<=ce(r)})).forEach((function(e,t){var o={};g.forEach((function(a){if("subregion_active_stream"===c){var n=u[a.name].confirmedCount[e]?u[a.name].confirmedCount[e]:0,r=u[a.name].deadCount[e]?u[a.name].deadCount[e]:0,i=u[a.name].curedCount[e]?u[a.name].curedCount[e]:0,s=Math.max(n-r-i,0);o[a.id]=s}else{var p=u[a.name][l][e]?u[a.name][l][e]:0;"subregion_new_stream"===c&&u[a.name][l][d[t-1]]&&(p-=u[a.name][l][d[t-1]]),o[a.id]=p}}));var r=0,i=0,s=0;Object.keys(u).filter((function(e){return!["confirmedCount","deadCount","curedCount","ENGLISH",q].includes(e)})).filter((function(e){return!g.map((function(e){return e.name})).includes(e)})).forEach((function(a){var n=u[a].confirmedCount[e]?u[a].confirmedCount[e]:0,o=u[a].deadCount[e]?u[a].deadCount[e]:0,l=u[a].curedCount[e]?u[a].curedCount[e]:0;if(r+=n,i+=o,s+=l,"subregion_new_stream"===c){var p=u[a].confirmedCount[d[t-1]]?u[a].confirmedCount[d[t-1]]:0,m=u[a].deadCount[d[t-1]]?u[a].deadCount[d[t-1]]:0,g=u[a].curedCount[d[t-1]]?u[a].curedCount[d[t-1]]:0;r-=p,i-=m,s-=g}}));var m=0;if("confirmedCount"===l&&(m=Math.max(r,0)),"deadCount"===l&&(m=Math.max(i,0)),"curedCount"===l&&(m=Math.max(s,0)),"subregion_active_stream"===c&&(m=Math.max(r-i-s,0)),Object.keys(u).length>=10&&(o[V.a.OTHERS[n]]=m),0===g.length){var f=u.confirmedCount[e]?u.confirmedCount[e]:0,h=u.deadCount[e]?u.deadCount[e]:0,y=u.curedCount[e]?u.curedCount[e]:0,b=Math.max(f-h-y,0),E="zh"===n?a[a.length-1]:u.ENGLISH;E=fe(E,n),o[E]="subregion_active_stream"===c?b:Math.max(u[l][e]?u[l][e]:0,0)}p.push(o)})),{plotData:p,dates:d,plotKeys:f}},ct=function(e){var t=e.data,a=e.currentRegion,n=e.date,o=e.darkMode,r=e.lang,i=e.plotSpecificType,l=e.plotDates,c=ge(t,a).confirmedCount,s=ge(t,a).deadCount,u=[{id:"fatality-line",color:o?"var(--primary-color-2)":"var(--primary-color-5)",data:Object.keys(c).filter((function(e){return ce(e)<=ce(n)&&c[e]>0&&(s[e]>0||"fatality_line"===i||"fatality_line_only"===i)})).filter((function(e){return ce(e)<=ce(l[1])&&ce(e)>=ce(l[0])})).map((function(e){return{d:e,cfr:null!=s[e]?s[e]/c[e]:0}})).map((function(e){var t=e.d,a=e.cfr;return{x:c[t],y:"fatality_line"===i||"fatality_line_only"===i?a:s[t],date:t,lang:r}}))}];return"fatality_line"!==i&&"fatality_line2"!==i||Object.keys(Qe.a).forEach((function(e){u.push({id:e,color:"var(--light-grey)",data:[{x:Qe.a[e].confirmedCount,y:"fatality_line"===i?Qe.a[e].deadCount/Qe.a[e].confirmedCount:Qe.a[e].deadCount,lang:r,name:Qe.a[e][r],years:Qe.a[e].years}]})})),{plotData:u}},st=function(e){var t=e.data,a=e.currentRegion,n=e.date,o=e.lang,r=e.darkMode,i=e.plotSpecificType,l=pt(t,a),c=[],s=0,u=1e5;ht(t,a).reverse().filter((function(e){return l[e].confirmedCount[n]>0&&l[e].deadCount[n]>=0&&(l[e].deadCount[n]>0||"subregion_fatality"===i||"subregion_fatality_only"===i)})).forEach((function(e,t){var a=l[e].confirmedCount[n],d=l[e].deadCount[n];s=Math.max(s,a),u=Math.min(u,a),c.push({id:e,color:r?"rgba(222,73,104,0.6)":"rgba(183,55,121,0.5)",data:[{x:a,y:"subregion_fatality"===i||"subregion_fatality_only"===i?d/a:d,regionName:"zh"===o?e:l[e].ENGLISH,lang:o}]})})),"subregion_fatality"!==i&&"subregion_fatality2"!==i||Object.keys(Qe.a).forEach((function(e){c.push({id:e,color:"rgba(0,0,0,0)",data:[{x:Qe.a[e].confirmedCount,y:"subregion_fatality"===i?Qe.a[e].deadCount/Qe.a[e].confirmedCount:Qe.a[e].deadCount,lang:o,name:Qe.a[e][o],years:Qe.a[e].years,noClick:!0}]})}));var d=yt(u,s),p=d.logTickMin,m=d.logTickMax;return{plotData:c,logTickMin:p,logTickMax:m}},ut=function(e){var t=e.data,a=e.date,n=e.currentRegion,o=e.lang,r=e.darkMode,i=e.playing,c=e.scale,s=e.metric,u=e.plotSpecificType,d=e.plotDetails,p=e.plotDates,m=e.fullPlot,g=pt(t,n),f=0,h=1e5,y=m?10:6,b=(i?ht(t,n,s,y):ht(t,n,s,y,a)).map((function(e,t){var n=g[e][s],l="zh"===o?e:g[e].ENGLISH;return{id:fe(l,o),fullId:l,name:e,color:"var(--primary-color-".concat(r?t<7?t:t+1:10-t,")"),data:Object.keys(n).filter((function(e){return!i||ce(e)<=ce(a)})).map((function(e){return n[e]>f&&(f=n[e]),n[e]<h&&(h=n[e]),"linear"===c||n[e]>0?{x:e,y:n[e],lang:o}:null})).filter((function(e){return null!=e}))}})).reverse();return["subregion_new","subregion_new_shifted_10","subregion_new_shifted_100"].includes(u)&&(b=mt(b)),b=gt(b,d.movingAverage),b=ft(b,p),Object(l.a)({plotData:b},bt(c,u,m,h,f))},dt=function(e){var t=e.scale,a=e.plotSpecificType,n=e.plotDetails,o=e.fullPlot,r=ut(e).plotData,i=parseInt(n.shifted,10),c=0,s=1e5;return r.forEach((function(e){var t=e.data.findIndex((function(e){return e.y>=i}));e.data=-1===t?[]:e.data.slice(t).map((function(e,t){return Object(l.a)({},e,{date:e.x,x:t})})),c=e.data.reduce((function(e,t){return Math.max(e,t.y)}),c),s=e.data.reduce((function(e,t){return Math.min(e,t.y)}),s)})),r=r.filter((function(e){return e.data.length>0})),Object(l.a)({plotData:r},bt(t,a,o,s,c))},pt=function(e,t){return 1===t.length&&t[0]===q?e:ge(e,t)},mt=function(e){return e.forEach((function(e){e.data=e.data.reduce((function(t,a,n){return[].concat(Object(O.a)(t),[e.data[n-1]?Object(l.a)({},a,{y:a.y-e.data[n-1].y}):a])}),[])})),e},gt=function(e,t){return"3d"===t?e.forEach((function(e){e.data=e.data.reduce((function(t,a,n){var o=a.y;return e.data[n-1]&&e.data[n+1]&&(o=(e.data[n-1].y+a.y+e.data[n+1].y)/3),[].concat(Object(O.a)(t),[Object(l.a)({},a,{y:o})])}),[])})):"5d"===t&&e.forEach((function(e){e.data=e.data.reduce((function(t,a,n){var o=a.y;return e.data[n-1]&&e.data[n-2]&&e.data[n+1]&&e.data[n+2]?o=(e.data[n-2].y+e.data[n-1].y+a.y+e.data[n+1].y+e.data[n+2].y)/5:e.data[n-1]&&e.data[n+1]&&(o=(e.data[n-1].y+a.y+e.data[n+1].y)/3),[].concat(Object(O.a)(t),[Object(l.a)({},a,{y:o})])}),[])})),e},ft=function(e,t){return e.forEach((function(e){e.data=e.data.filter((function(e){return ce(e.x)<=ce(t[1])&&ce(e.x)>=ce(t[0])}))})),e},ht=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"confirmedCount",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=pt(e,t),i=Object.keys(r).filter((function(e){return!["confirmedCount","deadCount","curedCount","ENGLISH",q].includes(e)})).sort((function(e,t){var n=Math.max.apply(Math,Object(O.a)(Object.values(r[e][a]))),i=Math.max.apply(Math,Object(O.a)(Object.values(r[t][a])));return null!=o&&(n=r[e][a][o]?r[e][a][o]:0,i=r[t][a][o]?r[t][a][o]:0),n<=i?1:-1}));return null!=n?i.filter((function(e,t){return t<=n-1&&0!==Math.max.apply(Math,Object(O.a)(Object.values(r[e][a])))})):i},yt=function(e,t){var a=e<=t?Math.max(Math.pow(10,Math.floor(Math.log10(e))),1):1,n=e<=t?Math.max(Math.pow(10,Math.ceil(Math.log10(t))),10):1;return{tickValues:Object(O.a)(Array(Math.log10(n/a)+1).keys()).map((function(e){return Math.pow(10,e)*a})),logTickMin:a,logTickMax:n}},bt=function(e,t,a,n,o){return"log"===e&&je[t].log?yt(n,o):{tickValues:a?10:5,logTickMin:1,logTickMax:1}},Et={total:at,new:nt,growth_total:ot,growth_new:ot,fatality_recovery:function(e){var t=e.data,a=e.currentRegion,n=e.darkMode,o=e.lang,r=e.date,i=e.playing,l=e.plotDetails,c=e.plotDates,s=ge(t,a).confirmedCount,u=("show"===l.recoveryRate?["deadCount","curedCount"]:["deadCount"]).map((function(e){var l=ge(t,a)[e];return{id:me["deadCount"===e?"fatalityRate":"recoveryRate"][o],color:n?tt[e]:et[e],data:Object.keys(l).filter((function(e){return!i||ce(e)<=ce(r)})).map((function(e){return{d:e,count:s[e]>0?l[e]/s[e]:0}})).map((function(e){return{x:e.d,y:e.count}}))}}));return u=gt(u,l.movingAverage),{plotData:u=ft(u,c)}},one_vs_rest:rt,one_vs_rest_new:rt,most_affected_subregions:it,most_affected_subregions_new:it,subregion_active_stream:lt,fatality_line:ct,fatality_line2:ct,fatality_line_only:ct,fatality_line2_only:ct,doubling_time:function(e){var t=ot(Object(l.a)({},e,{scale:"log"})).plotData;return t[0].data=t[0].data.map((function(t){return Object(l.a)({},t,{y:t.y>0?Math.log(2)/Math.log(t.y+1):null,lang:e.lang})})).filter((function(e){return null!=e.y&&e.y<1e3})),{plotData:t}},r0:function(e){var t=ot(Object(l.a)({},e,{metric:"confirmedCount",scale:"log"})).plotData;return t[0].data=t[0].data.map((function(t){return Object(l.a)({},t,{y:(1+5*Math.log(t.y+1))*(1+5*Math.log(t.y+1)),lang:e.lang})})).filter((function(e){return e.y<20})),{plotData:t}},subregion_fatality:st,subregion_fatality2:st,subregion_fatality_only:st,subregion_fatality2_only:st,subregion_total:ut,subregion_new:ut,subregion_total_stream:lt,subregion_new_stream:lt,subregion_total_shifted_100:dt,subregion_new_shifted_100:dt,subregion_total_shifted_10:dt,subregion_new_shifted_10:dt},vt=function(e,t){return{fontFamily:"Saira, sans-serif",fontSize:t?14:11,textColor:e?"var(--lighter-grey)":"black",grid:{line:{stroke:e?"var(--darkest-grey)":"var(--lighter-grey)"}},tooltip:{container:{background:e?"var(--darkest-grey)":"white",color:e?"var(--lighter-grey)":"black"}}}},Ot=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={height:290,plotDetails:{stats:"cumulative",fatalityLine:"rate",stream:"silhouette",diseaseComparison:"show",recoveryRate:"show",movingAverage:"1d",shifted:"100"},plotSpecificType:"total"},a.updateHight=function(){var e=Math.max(document.documentElement.clientHeight,window.innerHeight||0),t=Math.max(document.documentElement.clientWidth,window.innerWidth||0);a.setState({height:e<850&&t>=992?240:290})},a.onSelect=function(e,t){var n={};n.plotDetails=a.state.plotDetails,n.plotDetails[e]=t,a.setState(n),a.setSpecificPlotType(a.props.plotType,n.plotDetails)},a.setSpecificPlotType=function(e,t){var n=xe(e,t);a.setState({plotSpecificType:n})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.updateHight(),window.addEventListener("resize",this.updateHight)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateHight)}},{key:"componentDidUpdate",value:function(e,t){var a=this.props,n=a.data,o=a.currentRegion,r=1===o.length&&o[0]===q,i=Object.keys(ge(n,o)).length>4||r;r&&"plot_one_vs_rest"===this.props.plotType&&(this.props.handlePlotTypeChange("plot_basic"),this.setSpecificPlotType("plot_basic",this.state.plotDetails)),!i&&Re[this.props.plotType].subregions&&(this.props.handlePlotTypeChange("plot_basic"),this.setSpecificPlotType("plot_basic",this.state.plotDetails))}},{key:"render",value:function(){var e=this,t=this.props,a=t.plotType,n=t.data,r=t.lang,i=t.darkMode,c=t.fullPlot,s=t.fullTree,u=t.fullPlotToggle,d=t.fullDimensions;if(null==n||s)return o.a.createElement("div",null);var p,m=je[this.state.plotSpecificType],g=(p=Object(l.a)({},this.props,{plotSpecificType:this.state.plotSpecificType,plotDetails:this.state.plotDetails}),Et[p.plotSpecificType](p)),f=g.plotData,h=["plot_subregion_active_stream","plot_subregion_stream"].includes(a)?0===f.map((function(e){return Object.keys(e).length})).reduce((function(e,t){return e+t}),0):0===f.map((function(e){return e.data.length})).reduce((function(e,t){return e+t}),0),b=h?0:null!=g.tickValues?g.tickValues:5,E=c?y.d:y.c,v=Object(l.a)({},this.props,{plotParameters:m,plotDataAll:g,tickValues:b,plotTheme:vt(i,c)});return o.a.createElement("div",{className:"plot-wrap",style:{height:c?d.height-100:"auto",width:c?d.width+100:"100%"}},o.a.createElement(ze,Object.assign({},this.props,this.state,{currentPlotType:a,onPlotTypeChange:function(t){e.setSpecificPlotType(t,e.state.plotDetails),e.props.handlePlotTypeChange(t)}})),o.a.createElement("div",{className:"plot-with-nav-bar"},o.a.createElement(Ye,Object.assign({},this.props,this.state,{onSelect:this.onSelect})),o.a.createElement("div",{style:{height:c?d.height-125:this.state.height,width:c?d.width-70:"100%"}},h?o.a.createElement("div",{className:"plot-no-data"},o.a.createElement("span",null,V.a.NO_DATA[r])):o.a.createElement("div",null),!h&&o.a.createElement(Ke,v),!h&&o.a.createElement(qe,v),!h&&o.a.createElement(Xe,Object.assign({offsetType:this.state.plotDetails.stream},v)),o.a.createElement("div",{className:"plot-full-button","data-tip":c||k.isMobile||k.isIPad13?"":V.a.PLOT_SETTINGS[r]},o.a.createElement(E,{size:c?30:20,onClick:u})))))}}]),t}(n.Component),Ct=a(332),At=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={plotData:null,currentNodePath:null},a.handleNodeClick=function(e){var t=e.path===q?[e.path]:e.path.split(".").reverse().slice(1);a.props.regionToggle(t)},a.bringTextsToTop=function(){setTimeout((function(){document.querySelectorAll(".bubble-plot-wrap text").forEach((function(e){var t=e.parentNode;e.parentNode.parentNode.appendChild(t)}))}),100)},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(){this.bringTextsToTop()}},{key:"componentDidMount",value:function(){this.bringTextsToTop()}},{key:"render",value:function(){var e=this.props,t=e.data,a=e.metric,n=e.currentRegion,r=e.date,i=e.playing,l=e.lang,c=e.darkMode,s=e.fullTree;if(null==t)return o.a.createElement("div",null);var u={name:q,displayName:"en"===l?"Global":q,confirmedCount:t[q].confirmedCount[r],deadCount:t[q].deadCount[r],curedCount:t[q].curedCount[r],children:ye(t,r,l)},d=n[0]===q?q:[q].concat(Object(O.a)(n)).reverse().join("."),p=ge(t,n),m=p[a][r];(null==m||0===m||"\u4e2d\u56fd"===n[0]&&n.length>3||n[0]===ne&&3===n.length||"\u82f1\u56fd"===n[0]&&n.length>3||n[0]===ae&&n.length>2||n[0]===ie&&n.length>2)&&(d=[q].concat(Object(O.a)(n.slice(0,n.length-1))).reverse().join("."));var g=Object.keys(p).length>4?d:n[0]===q?q:[q].concat(Object(O.a)(n.slice(0,n.length-1))).reverse().join(".");return n[0]===ne&&n.length>1&&(g=[q,ne].reverse().join(".")),"\u82f1\u56fd"===n[0]&&n.length>2&&(g=[q].concat(Object(O.a)(n.slice(0,2))).reverse().join(".")),"\u4e2d\u56fd"===n[0]&&n.length>2&&(g=[q].concat(Object(O.a)(n.slice(0,2))).reverse().join(".")),n[0]===ae&&n.length>1&&(g=[q,ae].reverse().join(".")),n[0]===ie&&n.length>1&&(g=[q,ie].reverse().join(".")),o.a.createElement("div",{className:"bubble-plot-wrap"},o.a.createElement(Ct.a,{ref:this.bubble,root:u,theme:{fontFamily:"Saira, sans-serif",fontSize:s?14:11,tooltip:{container:{background:c?"var(--darkest-grey)":"white"}}},margin:{top:20,right:20,bottom:20,left:20},tooltip:function(e){var t=e.color,n=(e.value,e.data);return o.a.createElement("span",{className:"plot-tooltip",style:{color:"#fff"!==t||c?t:"#222"}},n.displayName,o.a.createElement("span",{className:"plot-tooltip-bold"}," ".concat(n[a])))},identity:"name",value:a,colors:[].concat(Object(O.a)([.3,.4,.15].map((function(e){return Object(S.c)(1-e)}))),["#fff"]),padding:3,enableLabel:!0,label:function(e){return e.data.displayName},labelTextColor:"#222",labelSkipRadius:s?10:6,animate:!i,motionStiffness:50,motionDamping:12,onClick:this.handleNodeClick,defs:[{id:"bubbleLines",type:"patternLines",background:"none",color:"inherit",rotation:-45,lineWidth:4,spacing:5}],fill:[{match:function(e){return e.path===d},id:"bubbleLines"}],currentNodePath:g}))}}]),t}(n.Component),_t=a(136);function Tt(e,t,a){return e.filter((function(e){return t.some((function(t){var n=e.values[t];return String(n).toLowerCase().includes(String(a).toLowerCase())}))}))}function St(e){return function(t,a,n){var o=function e(t){return[].concat(Object(O.a)(t),Object(O.a)(t.map((function(t){return e(t.subRows||[])})).reduce((function(e,t){return[].concat(Object(O.a)(e),Object(O.a)(t))}),[])))}(t).map((function(e){return Object(l.a)({},e,{subRows:[],depth:0,xFlat:!0})}));return e(o,a,n)}}function Nt(e){var t,a=e.columns,n=e.data,r=e.initialState,i=e.onRowClick,l=e.filterPlaceholder,c=Object(_t.useTable)({columns:a,data:n,defaultColumn:{Filter:(t=l,function(e){var a=e.column,n=a.filterValue,r=(a.preFilteredRows,a.setFilter);return o.a.createElement("input",{className:"data-table-input",value:n||"",onChange:function(e){r(e.target.value||void 0)},placeholder:t})}),filter:St(Tt)},initialState:r,getResetExpandedDeps:!1},_t.useFilters,_t.useSortBy,_t.useExpanded),s=c.getTableProps,u=c.getTableBodyProps,d=c.headerGroups,p=c.rows,m=c.prepareRow;return o.a.createElement("div",{className:"data-table-wrap"},d[0].headers[1].render("Filter"),o.a.createElement("table",Object.assign({className:"data-table"},s()),o.a.createElement("thead",null,d.map((function(e,t){return o.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map((function(e,t){return o.a.createElement("th",e.getHeaderProps(e.getSortByToggleProps()),e.render("Header"))})))}))),o.a.createElement("tbody",u(),p.map((function(e,t){return m(e),o.a.createElement("tr",Object.assign({id:"table-".concat(e.original.region)},e.getRowProps()),e.cells.map((function(t,a){return o.a.createElement("td",Object.assign({},t.getCellProps(),{onClick:a>0?function(){return i(e)}:null}),t.render("Cell"))})))})))),o.a.createElement("div",{style:{display:"none"}},p.length," regions"))}var kt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).onRowClick=function(e){a.props.regionToggle(e.original.region.split("."))},a.highlightCurrentRegion=function(){document.querySelectorAll(".data-table tr").forEach((function(e){return e.classList.remove("current")})),setTimeout((function(){var e=document.getElementById("table-".concat(a.props.currentRegion.join("."))),t=document.querySelector(".data-table tbody");if(null!=e&&null!=t){e.classList.add("current");var n=e.getBoundingClientRect(),o=t.getBoundingClientRect();n.top>=o.top&&n.bottom<=o.bottom||(t.scrollTop=e.offsetTop-t.offsetTop)}}),200)},a.getInitialSate=function(e){var t=a.props,n=t.currentRegion,o=t.playing;if(n[0]===q&&o)return{};var r=[];return n.slice(0,n.length-1).forEach((function(t){var a=r.reduce((function(e,t){return Array.isArray(e)?e[t]:e.subRows[t]}),e),n=(Array.isArray(a)?a:a.subRows).findIndex((function(e){return e.name===t}));r.push(n)})),{expanded:r.map((function(e,t){return r.slice(0,t+1).join(".")})).reduce((function(e,t){return e[t]=!0,e}),{})}},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e){e.currentRegion.join(".")!==this.props.currentRegion.join(".")&&this.highlightCurrentRegion()}},{key:"componentDidMount",value:function(){this.highlightCurrentRegion()}},{key:"shouldComponentUpdate",value:function(e){return e.lang!==this.props.lang||e.date!==this.props.date||e.currentRegion!==this.props.currentRegion||e.fullTree!==this.props.fullTree}},{key:"render",value:function(){var e=this.props,t=e.data,a=e.lang,n=e.date,r=e.fullTree;if(null==t)return o.a.createElement("div",null);var i=ye(t,n,a,!1,"subRows","confirmedCount",q,r),l=[{id:"expander",Header:function(e){var t=e.getToggleAllRowsExpandedProps,a=e.isAllRowsExpanded;return o.a.createElement("span",t(),a?o.a.createElement(y.a,{size:14}):o.a.createElement(y.b,{size:14}))},Cell:function(e){var t=e.row;return(t.canExpand?o.a.createElement("span",t.getToggleRowExpandedProps({style:{paddingLeft:0}}),t.isExpanded?o.a.createElement(y.a,{size:14}):o.a.createElement(y.b,{size:14})):null)}},{id:"table-region",Header:V.a.REGION[a],Cell:function(e){var t=e.row;return o.a.createElement("span",null,"".concat(Object(O.a)(Array(t.depth+1).keys()).map((function(e){return"\u3000"})).join("")).concat(t.original.displayName,"\xa0\xa0"))},accessor:"displayName"},{id:"table-confirmed",Header:V.a.CONFIRMED[a],Cell:function(e){var t=e.row;return isNaN(t.original.confirmedCount)?"\u2014":t.original.confirmedCount},accessor:"confirmedCount"},{id:"table-deaths",Header:V.a.DEATHS[a],Cell:function(e){var t=e.row;return isNaN(t.original.deadCount)?"\u2014":t.original.deadCount},accessor:"deadCount"},{id:"table-recovery",Header:V.a.RECOVERED[a],Cell:function(e){var t=e.row;return isNaN(t.original.curedCount)?"\u2014":t.original.curedCount},accessor:"curedCount"}];r&&(l=[].concat(Object(O.a)(l),[{id:"table-active",Header:V.a.ACTIVE[a],Cell:function(e){var t=e.row;return isNaN(t.original.active)?"\u2014":t.original.active},accessor:"active"},{id:"table-newConfirmed",Header:V.a.NEW_CONFIRMED[a],Cell:function(e){var t=e.row;return isNaN(t.original.newConfirmed)?"\u2014":t.original.newConfirmed},accessor:"newConfirmed"},{id:"table-newDead",Header:V.a.NEW_DEATHS[a],Cell:function(e){var t=e.row;return isNaN(t.original.newDead)?"\u2014":t.original.newDead},accessor:"newDead"},{id:"table-fatalityRate",Header:V.a.FATALITY_RATE[a],Cell:function(e){var t=e.row;return isNaN(t.original.fatalityRate)?"\u2014":(100*t.original.fatalityRate).toFixed(2)+"%"},accessor:"fatalityRate",sortType:"basic"},{id:"table-recoveryRate",Header:V.a.RECOVERY_RATE[a],Cell:function(e){var t=e.row;return isNaN(t.original.recoveryRate)?"\u2014":(100*t.original.recoveryRate).toFixed(2)+"%"},accessor:"recoveryRate",sortType:"basic"}]));var c=this.getInitialSate(i);return o.a.createElement("div",{style:{height:"100%"}},o.a.createElement(Nt,{columns:l,data:i,initialState:c,onRowClick:this.onRowClick,filterPlaceholder:"".concat(V.a.SEARCH[a]," ...")}))}}]),t}(n.Component),Mt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={height:280,type:"bubble"},a.updateHight=function(){var e=Math.max(document.documentElement.clientHeight,window.innerHeight||0),t=Math.max(document.documentElement.clientWidth,window.innerWidth||0);a.setState({height:e<850&&t>=992?240:280})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.updateHight(),window.addEventListener("resize",this.updateHight)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateHight)}},{key:"render",value:function(){var e=this,t=this.props,a=t.fullPlot,n=t.fullTree,r=t.fullTreeToggle,i=t.fullDimensions,l=t.lang;if(a)return o.a.createElement("div",null);var c=n?y.d:y.c;return o.a.createElement("div",{className:"tree-wrap",style:{height:n?i.height-100:this.state.height,width:n?i.width+100:"100%"}},o.a.createElement("div",{className:"tree-full-button"},o.a.createElement(c,{size:n?30:20,onClick:r})),o.a.createElement("div",{className:"bubble-table-toggle-btn"},o.a.createElement(Be,{texts:{bubble:V.a.BUBBLES[l],table:V.a.TABLE[l]},selected:this.state.type,onSelect:function(t){return e.setState({type:t})},alwaysShow:!0})),"bubble"===this.state.type&&o.a.createElement(At,this.props),"table"===this.state.type&&o.a.createElement(kt,this.props))}}]),t}(n.Component),xt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={langText:"English",scaleText:V.a.LINEAR_SCALE.en,darkModeText:V.a.DARK.en},a.setTexts=function(){var e=a.props,t=e.scale,n=e.lang,o=e.darkMode;a.setState({langText:V.a.LANGUAGE[n],scaleText:"linear"===t?V.a.LINEAR_SCALE[n]:V.a.LOG_SCALE[n],darkModeText:o?V.a.DARK[n]:V.a.LIGHT[n]})},a.onScaleChange=function(){var e="linear"===a.props.scale?"log":"linear";a.props.scaleToggle(e)},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.scale===this.props.scale&&e.lang===this.props.lang&&e.darkMode===this.props.darkMode||this.setTexts()}},{key:"render",value:function(){var e=this,t=this.props,a=t.scale,n=t.lang,r=t.darkMode,i=t.languageToggle;return o.a.createElement("div",{className:"nav-bar"},o.a.createElement(Ee.a,null,o.a.createElement(ve.a,{tag:"div",className:"nav-bar-icon","data-toggle":"dropdown","data-tip":V.a.LANGUAGE_HELP_TEXT[n]},V.a.LANGUAGE[n]),o.a.createElement(Oe.a,null,Object.keys(V.a.LANGUAGE).map((function(e){return o.a.createElement(Ce.a,{key:e,className:e===n?"current":"",onClick:function(){return i(e)}},V.a.LANGUAGE[e])})))),k.isMobile||k.isIPad13?o.a.createElement("div",{className:"nav-bar-icon",onTouchStart:this.props.darkModeToggle},r?V.a.DARK[n]:V.a.LIGHT[n]):o.a.createElement("div",{className:"nav-bar-icon","data-tip":r?V.a.LIGHT_MODE_HELP_TEXT[n]:V.a.DARK_MODE_HELP_TEXT[n],onClick:this.props.darkModeToggle,onMouseEnter:function(){return e.setState({darkModeText:r?V.a.LIGHT[n]:V.a.DARK[n]})},onMouseLeave:this.setTexts},this.state.darkModeText),k.isMobile||k.isIPad13?o.a.createElement("div",{className:"nav-bar-icon",onTouchStart:this.onScaleChange},"linear"===a?V.a.LINEAR_SCALE[n]:V.a.LOG_SCALE[n]):o.a.createElement("div",{className:"nav-bar-icon","data-tip":"linear"===a?V.a.LOG_SCALE_HELP_TEXT[n]:V.a.LINEAR_SCALE_HELP_TEXT[n],onClick:this.onScaleChange,onMouseEnter:function(){return e.setState({scaleText:"linear"===a?V.a.LOG_SCALE[n]:V.a.LINEAR_SCALE[n]})},onMouseLeave:this.setTexts},this.state.scaleText),o.a.createElement("div",{className:"nav-bar-icon","data-tip":V.a.RESET_HELP_TEXT[n],onClick:this.props.reset},V.a.RESET[n]))}}]),t}(n.Component);function Rt(){return(Rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function jt(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var wt=o.a.createElement("path",{d:"M21.749,14.235c0.187-0.811,0.271-1.644,0.25-2.475c-0.016-0.658-0.1-1.322-0.251-1.985l-1.947,0.454 c0.058,0.256,0.103,0.514,0.136,0.772H18.92c-0.17-1.185-0.634-2.271-1.32-3.187l0.716-0.716c0.158,0.203,0.312,0.411,0.449,0.628 l1.691-1.068c-0.795-1.259-1.886-2.343-3.155-3.136l-1.059,1.696c0.228,0.143,0.447,0.301,0.66,0.467l-0.715,0.715 C15.271,5.714,14.185,5.249,13,5.08V4.067c0.256,0.032,0.512,0.071,0.764,0.128l0.444-1.95c-1.445-0.328-3.054-0.31-4.349-0.01 L9.741,2.259l0.487,1.94c0.255-0.058,0.513-0.098,0.772-0.13V5.08c-1.185,0.17-2.271,0.634-3.187,1.32L7.097,5.683 c0.205-0.16,0.415-0.314,0.634-0.453L6.665,3.539c-1.259,0.793-2.344,1.883-3.139,3.15l1.695,1.062 c0.142-0.226,0.299-0.443,0.463-0.654l0.715,0.715C5.714,8.729,5.249,9.815,5.08,11H4.07c0.032-0.259,0.068-0.518,0.126-0.773 L2.246,9.784c-0.184,0.804-0.266,1.631-0.245,2.457c0.016,0.657,0.1,1.322,0.244,1.956l0.003,0.016l1.951-0.441 C4.141,13.516,4.096,13.258,4.063,13H5.08c0.17,1.185,0.634,2.271,1.32,3.187l-0.716,0.716c-0.162-0.207-0.317-0.42-0.457-0.642 l-1.693,1.065c0.793,1.26,1.881,2.347,3.148,3.142l1.063-1.694c-0.224-0.141-0.438-0.297-0.647-0.459l0.715-0.715 c0.915,0.685,2.002,1.15,3.187,1.32v1.014c-0.261-0.033-0.522-0.074-0.779-0.132l-0.445,1.949c0.807,0.185,1.636,0.268,2.465,0.247 c0.661-0.017,1.324-0.1,1.941-0.24l0.009-0.002l-0.418-1.956c-0.255,0.058-0.513,0.098-0.772,0.131V18.92 c1.185-0.17,2.271-0.634,3.187-1.32l0.716,0.716c-0.209,0.163-0.423,0.319-0.647,0.46l1.064,1.694 c1.26-0.792,2.347-1.879,3.144-3.145l-1.693-1.065c-0.14,0.222-0.295,0.434-0.456,0.641l-0.715-0.715 c0.685-0.915,1.15-2.002,1.32-3.187h1.009c-0.033,0.264-0.07,0.527-0.13,0.786L21.749,14.235z M7,12c0-0.552,0.448-1,1-1 s1,0.448,1,1c0,0.552-0.448,1-1,1S7,12.552,7,12z M9,16c-0.552,0-1-0.448-1-1c0-0.552,0.448-1,1-1s1,0.448,1,1 C10,15.552,9.552,16,9,16z M9,10c-0.552,0-1-0.448-1-1c0-0.552,0.448-1,1-1s1,0.448,1,1C10,9.552,9.552,10,9,10z M12,17 c-0.552,0-1-0.448-1-1c0-0.552,0.448-1,1-1s1,0.448,1,1C13,16.552,12.552,17,12,17z M12,13c-0.552,0-1-0.448-1-1 c0-0.552,0.448-1,1-1s1,0.448,1,1C13,12.552,12.552,13,12,13z M12,9c-0.552,0-1-0.448-1-1c0-0.552,0.448-1,1-1s1,0.448,1,1 C13,8.552,12.552,9,12,9z M15,8c0.552,0,1,0.448,1,1c0,0.552-0.448,1-1,1s-1-0.448-1-1C14,8.448,14.448,8,15,8z M15,16 c-0.552,0-1-0.448-1-1c0-0.552,0.448-1,1-1s1,0.448,1,1C16,15.552,15.552,16,15,16z M16,13c-0.552,0-1-0.448-1-1 c0-0.552,0.448-1,1-1s1,0.448,1,1C17,12.552,16.552,13,16,13z"}),It=function(e){var t=e.svgRef,a=e.title,n=jt(e,["svgRef","title"]);return o.a.createElement("svg",Rt({viewBox:"0 0 24 24",ref:t},n),a?o.a.createElement("title",null,a):null,wt)},Dt=o.a.forwardRef((function(e,t){return o.a.createElement(It,Rt({svgRef:t},e))})),Lt=(a.p,function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"loading-icon"},o.a.createElement(Dt,null))}}]),t}(n.Component)),Ft=a(590),Pt=a(582),Ht=a(583),Ut=(n.Component,a(336)),zt=a(168),Gt=function(e){var t=e.children,a=e.isOpen,n=e.target,r=e.onClose;return o.a.createElement("div",{style:{position:"relative"}},n,a?o.a.createElement("div",{className:"region-menu"},t):null,a?o.a.createElement("div",{className:"region-blanket",onClick:r}):null)},Wt=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.region,a=e.data,r=e.date,i=e.metric,l=e.darkMode;return o.a.createElement("div",{className:"region-option"},o.a.createElement("div",null,t.map((function(e,a){return a===t.length-1?o.a.createElement("span",{key:"region-".concat(t[t.length-1],"-").concat(a)},e):o.a.createElement(n.Fragment,{key:"region-".concat(t[t.length-1],"-").concat(a)},o.a.createElement("span",null,e),o.a.createElement(Pe.d,{size:14,color:l?"var(--light-grey)":"var(--dark-grey)"}))}))),o.a.createElement("div",{className:"region-option-count"},a[i]&&a[i][r]?a[i][r]:0))}}]),t}(n.Component),Bt={control:function(e,t){return Object(l.a)({},e,{minWidth:240,marginBottom:8,borderRadius:30})},menu:function(){return{backgroundColor:"white",boxShadow:"0 0 0 1px hsla(218, 50%, 10%, 0.1), 0 4px 11px hsla(218, 50%, 10%, 0.1)",cursor:"pointer"}},option:function(e,t){return Object(l.a)({},e,{textAlign:"left",fontSize:12,backgroundColor:t.isFocused?"var(--primary-color-5)":t.isSelected?"#eee":null,color:t.isFocused?"#fff":"#000",cursor:"pointer"})}},Yt={control:function(e,t){return Object(l.a)({},e,{minWidth:240,marginBottom:8,borderRadius:30})},menu:function(){return{backgroundColor:"var(--dark-grey)",boxShadow:"0 0 0 1px hsla(218, 50%, 10%, 0.1), 0 4px 11px hsla(218, 50%, 10%, 0.1)",cursor:"pointer"}},option:function(e,t){return Object(l.a)({},e,{textAlign:"left",fontSize:12,backgroundColor:t.isFocused?"var(--primary-color-4)":t.isSelected?"#777":null,color:"var(--lighter-grey)",cursor:"pointer"})}},Vt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1,value:"en",options:[],countryOnly:!0},a.toggleOpen=function(){a.setState((function(e){return{isOpen:!e.isOpen}}))},a.toggleCountryOnly=function(){a.props.ReactTooltip.hide(a.regionSelectMore),a.setState({countryOnly:!a.state.countryOnly})},a.onSelectChange=function(e){a.toggleOpen(),a.setState({value:e}),a.props.regionToggle(e.region)},a.generateOptions=function(e){var t=a.props,n=t.data,r=t.lang,i=t.date,l=t.metric,c=Object(O.a)(Array(e.length).keys()).map((function(t){return e.slice(0,t+1)})).map((function(e){return ge(n,e).ENGLISH})),s=[],u=ge(n,e);return Object.keys(u).filter((function(e){return!["confirmedCount","deadCount","curedCount","ENGLISH"].includes(e)})).sort((function(e,t){return(u[e][l][i]?u[e][l][i]:0)>(u[t][l][i]?u[t][l][i]:0)?-1:1})).forEach((function(t){s.push({value:"zh"===r?[].concat(Object(O.a)(e),[t]).join(""):[].concat(Object(O.a)(c),[u[t].ENGLISH]).join(""),region:[].concat(Object(O.a)(e),[t]),label:o.a.createElement(Wt,{region:"zh"===r?[].concat(Object(O.a)(e),[t]):[].concat(Object(O.a)(c),[u[t].ENGLISH]),data:u[t],date:i,metric:l})});var d=ge(n,[].concat(Object(O.a)(e),[t])),p=["\u4e2d\u56fd","\u6cd5\u56fd","\u82f1\u56fd","\u8377\u5170","\u4e39\u9ea6"];Object.keys(d).length>4&&(!a.state.countryOnly||0===e.length&&p.includes(t))&&(s=[].concat(Object(O.a)(s),Object(O.a)(a.generateOptions([].concat(Object(O.a)(e),[t])))))})),s},a.displayRegionName=function(){var e=a.props,t=e.currentRegion,n=e.data,o=e.lang,r=Object(O.a)(new Set(t));if("zh"===o)return r=(r=(r=(r=(r=(r="\u56fd\u9645\u8fd0\u8f93"!==(r="\u4e2d\u56fd"!==(r=r.join(""))?r.replace("\u4e2d\u56fd",""):"\u4e2d\u56fd")?r.replace("\u56fd\u9645\u8fd0\u8f93",""):"\u56fd\u9645\u8fd0\u8f93")!==$?r.replace($,""):$)!=="".concat("\u6cd5\u56fd").concat("\u6cd5\u56fd\u672c\u571f")?r.replace("\u6cd5\u56fd\u672c\u571f",""):"\u6cd5\u56fd\u672c\u571f")!=="".concat("\u6cd5\u56fd").concat("\u6d77\u5916\u9886\u571f")?r.replace("".concat("\u6cd5\u56fd").concat("\u6d77\u5916\u9886\u571f"),""):"".concat("\u6cd5\u56fd").concat("\u6d77\u5916\u9886\u571f"))!=="".concat("\u82f1\u56fd").concat("\u6d77\u5916\u9886\u571f")?r.replace("".concat("\u82f1\u56fd").concat("\u6d77\u5916\u9886\u571f"),""):"".concat("\u82f1\u56fd").concat("\u6d77\u5916\u9886\u571f"))!=="".concat("\u82f1\u56fd").concat("\u7687\u5bb6\u5c5e\u5730")?r.replace("".concat("\u82f1\u56fd").concat("\u7687\u5bb6\u5c5e\u5730"),""):"".concat("\u82f1\u56fd").concat("\u7687\u5bb6\u5c5e\u5730");if(null!=n){var i=Object(O.a)(Array(t.length).keys()).map((function(e){return t.slice(0,e+1)})).map((function(e){return ge(n,e).ENGLISH}));return r=(r=(r=(r=(r=(r=(r=(r="Mainland China"!==(r="China"!==(r=(i=Object(O.a)(new Set(i))).reverse().join(", "))?r.replace(", ".concat("China"),""):"China")?r.replace(", ".concat("Mainland China"),""):"Mainland China")!=="".concat("Metropolitan France",", ").concat("France")?r.replace(", ".concat("Metropolitan France"),""):"Metropolitan France")!=="".concat("Overseas France",", ").concat("France")?r.replace(", ".concat("Overseas France",", ").concat("France"),""):"Overseas France")!==le?r.replace(", ".concat(le),""):le)!==oe?r.replace(oe,"US"):oe)!==re?r.replace(re,"UK"):re)!=="".concat("Overseas Territories",", ").concat("UK")?r.replace(", ".concat("Overseas Territories",", ").concat("UK"),""):"Overseas Territories")!=="".concat("Crown Dependencies",", ").concat("UK")?r.replace(", ".concat("Crown Dependencies",", ").concat("UK"),""):"Crown Dependencies"}},a.displayDate=function(){var e=a.props,t=e.lang,n=e.date;return de(n,t)},a.showTooltip=function(){var e=document.querySelector(".current-region div");return null==e||e.offsetWidth===e.scrollWidth},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.generateOptions([]);this.setState({options:e,value:{value:"zh"===this.props.lang?q:"Global"}})}},{key:"componentDidUpdate",value:function(e,t){if(e.lang!==this.props.lang||e.metric!==this.props.metric||e.date!==this.props.date||t.countryOnly!==this.state.countryOnly){var a=this.generateOptions([]);this.setState({options:a})}if(t.isOpen===this.state.isOpen&&t.countryOnly===this.state.countryOnly||this.props.ReactTooltip.rebuild(),e.currentRegion!==this.props.currentRegion){var n=this.props,o=n.data,r=n.currentRegion,i=n.lang,l=Object(O.a)(Array(r.length).keys()).map((function(e){return r.slice(0,e+1)})).map((function(e){return ge(o,e).ENGLISH}));this.setState({value:{value:"zh"===i?r.join(""):l.join("")}})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.isOpen,n=t.value,r=t.countryOnly;if(null!=this.props.data){var i=r?zt.c:zt.a;return o.a.createElement("div",{className:"current-region-wrap"},o.a.createElement(Gt,{isOpen:a,onClose:this.toggleOpen,target:o.a.createElement("div",{className:"current-region",onClick:this.toggleOpen},o.a.createElement("div",{"data-tip":this.displayRegionName(),"data-tip-disable":this.showTooltip(),"data-place":"bottom"},this.displayRegionName()),o.a.createElement(zt.b,{size:18,className:"dropdown-arrow",style:{transform:"translateY(1px)"}}))},o.a.createElement(Ut.a,{classNamePrefix:"region-select",autoFocus:!0,backspaceRemovesValue:!1,components:{DropdownIndicator:function(){return o.a.createElement("span",{className:"region-select-more",onMouseUp:e.toggleCountryOnly,onTouchEnd:e.toggleCountryOnly,onMouseEnter:function(){return e.props.ReactTooltip.show(e.regionSelectMore)},onMouseLeave:function(){return e.props.ReactTooltip.hide(e.regionSelectMore)},ref:function(t){return e.regionSelectMore=t},"data-tip":r?V.a.MORE_REGIONS_HELP_TEXT[e.props.lang]:V.a.LESS_REGIONS_HELP_TEXT[e.props.lang]},o.a.createElement(i,{size:16,color:e.props.darkMode?"var(--primary-color-4)":"var(--primary-color-5)"}))},IndicatorSeparator:null},controlShouldRenderValue:!1,hideSelectedOptions:!1,isClearable:!1,menuIsOpen:!0,onChange:this.onSelectChange,options:this.state.options,placeholder:"".concat(V.a.SEARCH[this.props.lang]," ...... "),styles:this.props.darkMode?Yt:Bt,tabSelectsValue:!1,value:n,noOptionsMessage:function(){return V.a.NO_RESULT[e.props.lang]}})),o.a.createElement("div",{className:"current-date"},this.displayDate()))}}}]),t}(n.Component),Kt=a(334),Zt=function(e){var t=e.node,a=e.darkMode;return o.a.createElement("div",{className:"country-node ".concat(t.selected||t.highlighted?"selected":""),style:{backgroundColor:t.selected?"#fff":t.color?t.color:a?"var(--dark-grey)":"var(--lighter-grey)",fontSize:t.fontSize}},o.a.createElement("style",null,t.selected?"#".concat(t.id," text {font-weight: bold; font-size: 14px; }"):t.highlighted?"#".concat(t.id," text {font-size: 9px; }"):"#".concat(t.id," text {font-size: ").concat(t.labelFontSize,"px;}"),".country-node.selected,.country-node:hover { border: solid ".concat(t.strokeWidth,"px ").concat(a?"var(--primary-color-4)":"var(--primary-color-5)",";}")))},Xt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).getRegion=function(e){return[$,Q,ee,te].includes(e)?["\u4e2d\u56fd",e]:"\u94bb\u77f3\u516c\u4e3b\u53f7"===e?["\u56fd\u9645\u8fd0\u8f93","\u94bb\u77f3\u516c\u4e3b\u53f7"]:[e]},a.getCount=function(e){var t=a.props,n=t.data,o=t.date,r=t.metric,i=ge(n,a.getRegion(e));return i[r][o]?i[r][o]:0},a.getColor=function(e,t){var n=a.getCount(e),o=a.getScale();return Object(T.a)((function(e){return Object(S.c)((a=o(e),t?.95*a+.05:.95-.95*a));var a}))(n)},a.getScale=function(){var e=a.props,t=e.scale,n=e.metric;return("linear"===t?A.a:_.a)().domain([1,I.a.TRANSMISSION["maxScale_".concat(n)]])},a.getDisplayName=function(e){var t=a.props,n=t.lang,o=t.data;return"zh"===n?e:ge(o,a.getRegion(e)).ENGLISH},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.mapDimensions,n=t.date,r=t.regionToggle,i=t.currentRegion,l=t.currentMap,c=t.darkMode;if("TRANSMISSION"!==l)return o.a.createElement("div",null);var s={directed:!0,automaticRearrangeAfterDropNode:!0,panAndZoom:!0,minZoom:.75,maxZoom:2,focusAnimationDuration:.5,nodeHighlightBehavior:!0,width:a.width,height:a.height,highlightOpacity:.2,d3:{gravity:-20,linkLength:.15*a.width},link:{color:c?"var(--darkest-grey)":"var(--lighter-grey)",highlightColor:c?"var(--primary-color-4)":"var(--primary-color-5)",strokeWidth:1,mouseCursor:"default"},node:{labelProperty:"displayName",viewGenerator:function(e){return o.a.createElement(Zt,{node:e,darkMode:c})}}},u={};P.a.forEach((function(e){ce(e.date)>ce(n)||(e.from in u?u[e.from]+=1:u[e.from]=1,e.to in u?u[e.to]+=0:u[e.to]=0)}));var d={nodes:Object.keys(u).map((function(t){return{id:t,displayName:e.getDisplayName(t),size:Math.max(Math.min(20*u[t],230),150),count:e.getCount(t),color:e.getColor(t,c),labelFontSize:u[t]>6?9:0,selected:i[i.length-1]===t}})),links:P.a.filter((function(e){return ce(e.date)<=ce(n)})).map((function(e){return{source:e.from,target:e.to}}))};return o.a.createElement(Kt.Graph,{id:"transmission-network",data:d,config:s,onClickNode:function(t){return r(e.getRegion(t))}})}}]),t}(n.Component),Jt={currentMap:"WORLD",metric:"confirmedCount",currentRegion:[q],playing:!1,scale:"linear",mapZoom:1,fullMap:!1,fullPlot:!1,fullTree:!1},qt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state=Object(l.a)({startDate:"2020-01-24",endDate:"2020-02-14",date:"2020-02-14",tempDate:"2020-02-14",plotDates:["2020-01-24","2020-02-14"],data:null,dataLoaded:!1,lang:"en",darkMode:!0,mapDimensions:{width:-1,height:-1},fullDimensions:{width:-1,height:-1},plotType:"plot_basic"},Jt),a.fetchData=function(){return fetch("data/all_minified.json").then((function(e){return e.json()})).then((function(e){var t=Object.keys(e[q].confirmedCount).pop();a.setState({data:e,dataLoaded:!0,date:t,tempDate:t,endDate:t,plotDates:[a.state.plotDates[0],t]}),a.tooltipRebuild()}))},a.updateFullDimensions=function(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;(t<750||e<992)&&(a.state.fullMap&&a.setState({fullMap:!1}),a.state.fullPlot&&a.setState({fullPlot:!1})),a.setState({fullDimensions:{height:Math.min(t-250,3*(e-200)/4),width:Math.min(4*(t-250)/3,e-200)}})},a.reset=function(){return a.setState(Object(l.a)({},Jt,{date:a.state.endDate,tempDate:a.state.endDate,plotDates:[a.state.startDate,a.state.endDate]}))},a.mapToggle=function(e){return a.setState({currentMap:e,mapZoom:e===K||a.state.currentMap===K?1:a.state.mapZoom})},a.metricToggle=function(e){return a.setState({metric:e})},a.regionToggle=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=a.state.currentMap;if(a.setState({currentRegion:e}),t&&"TRANSMISSION"!==n)if("\u4e2d\u56fd"===e[0])e.length>=4?a.mapToggle(X):e.length>=2&&e[1]===Q?a.mapToggle("HKG"):n!==X&&a.mapToggle(Z);else if(e[0]===ne)e.length>=2&&e[1]in L.a?a.mapToggle("US2"):a.mapToggle(J);else if(e[0]===ae)e.length>=3?a.mapToggle("ITA2"):"ITA2"!==n&&a.mapToggle("ITA");else if("\u56fd\u9645\u8fd0\u8f93"===e[0])a.mapToggle("JPN");else{var o=Object.keys(_e).find((function(t){return _e[t].regionName===e[0]}));(o=null!=o?o:K)===K&&"EUROPE"===n&&(o="EUROPE"),a.mapToggle(o)}},a.playingToggle=function(){return a.setState({playing:!a.state.playing})},a.scaleToggle=function(e){return a.setState({scale:e})},a.languageToggle=function(e){return a.setState({lang:e})},a.fullMapToggle=function(){a.setState({fullMap:!a.state.fullMap})},a.fullPlotToggle=function(){h.a.hide(),a.setState({fullPlot:!a.state.fullPlot})},a.fullTreeToggle=function(){a.setState({fullTree:!a.state.fullTree})},a.darkModeToggle=function(){he(!a.state.darkMode),a.setState({darkMode:!a.state.darkMode})},a.handleMapZoomChange=function(e){return a.setState({mapZoom:e})},a.handleDateChange=function(e){return a.setState({date:e,tempDate:e})},a.handleTempDateChange=function(e){var t=e.map((function(e){return pe(e,a.state.endDate).slice(0,10)}));a.state.fullPlot?a.setState({plotDates:t}):a.setState({tempDate:t[0]})},a.handlePlotTypeChange=function(e){return a.setState({plotType:e})},a.tooltipRebuild=function(){return h.a.rebuild()},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){he(this.state.darkMode),this.fetchData(),this.updateFullDimensions(),window.addEventListener("resize",this.updateFullDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateFullDimensions)}},{key:"render",value:function(){var e=this,t=this.state,a=t.lang,r=t.dataLoaded,i=t.currentMap,l=t.fullMap,c=t.fullPlot,s=t.fullTree,u=t.darkMode,d=l?"map-full":c?"plot-full":s?"tree-full":"",p=l?y.d:y.c;return o.a.createElement("div",{className:"App ".concat(u?"dark":"")},o.a.createElement(E.a,null,o.a.createElement("title",null,V.a.COVID19[a])),r?o.a.createElement(n.Fragment,null,o.a.createElement(m.a,{className:"app-container ".concat(d)},o.a.createElement(g.a,null,o.a.createElement(f.a,{lg:l?12:7},o.a.createElement("div",{className:"header"},o.a.createElement("span",{className:"header-icon",style:{opacity:r?1:0}},o.a.createElement(Dt,null)),o.a.createElement("span",{className:"header-title",style:{letterSpacing:"zh"===a?"1px":"normal"}},V.a.COVID19[a])),o.a.createElement(xt,Object.assign({},this.state,{scaleToggle:this.scaleToggle,languageToggle:this.languageToggle,darkModeToggle:this.darkModeToggle,reset:this.reset})),!c&&!s&&o.a.createElement(v.a,{bounds:!0,onResize:function(t){e.setState({mapDimensions:t.bounds})}},(function(t){var a=t.measureRef;return o.a.createElement("div",{ref:a,className:"map",style:{height:l?e.state.fullDimensions.height:3*e.state.mapDimensions.width/4,width:l?e.state.fullDimensions.width:"100%"}},"TRANSMISSION"===i&&o.a.createElement(Xt,Object.assign({},e.state,{regionToggle:e.regionToggle,tooltipRebuild:e.tooltipRebuild})),"TRANSMISSION"!==i&&o.a.createElement(be,Object.assign({},e.state,{handleMapZoomChange:e.handleMapZoomChange,mapToggle:e.mapToggle,regionToggle:e.regionToggle,tooltipRebuild:e.tooltipRebuild})),o.a.createElement("div",{className:"map-full-button"},o.a.createElement(p,{size:l?30:20,onClick:e.fullMapToggle})))})),o.a.createElement(we,Object.assign({},this.state,{mapToggle:this.mapToggle,metricToggle:this.metricToggle,regionToggle:this.regionToggle})),o.a.createElement(Fe,Object.assign({},this.state,{handleDateChange:this.handleDateChange,handleTempDateChange:this.handleTempDateChange})),o.a.createElement(He,Object.assign({},this.state,{handleDateChange:this.handleDateChange,playingToggle:this.playingToggle})),o.a.createElement("div",{className:"footer-white"})),!l&&o.a.createElement(f.a,{lg:c||s?12:5,className:"col-right"},o.a.createElement(g.a,{style:{display:"flex",flexDirection:"column",padding:10}},o.a.createElement(Vt,Object.assign({},this.state,{regionToggle:this.regionToggle,ReactTooltip:h.a})),o.a.createElement(Ue,this.state),o.a.createElement(Ot,Object.assign({},this.state,{regionToggle:this.regionToggle,fullPlotToggle:this.fullPlotToggle,scaleToggle:this.scaleToggle,handlePlotTypeChange:this.handlePlotTypeChange})),o.a.createElement(Mt,Object.assign({},this.state,{regionToggle:this.regionToggle,fullTreeToggle:this.fullTreeToggle})),o.a.createElement("div",{className:"footer-placeholder"})))))):o.a.createElement(Lt,null),o.a.createElement(h.a,{className:"plot-tooltip",type:u?"dark":"light",html:!0}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(qt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},91:function(e,t,a){e.exports=a.p+"static/media/us_map.db25f547.yml"}},[[373,1,2]]]);
//# sourceMappingURL=main.a5374be2.chunk.js.map